# 📏 Lint & QA Standards Guide

이 문서는 프로젝트의 코드, 문서, 포스트가 준수해야 할 자동화된 품질 기준(Linting & QA)을 정의합니다.
커밋 시(`pre-commit`)와 CI/CD 파이프라인에서 자동으로 검사되므로, 문서를 작성할 때 이 기준을 미리 확인하세요.

## 1. 📂 파일 유형별 기준 (Overview)

| 파일 유형 | 대상 경로                   | 도구                   | 주요 점검 항목                            |
| :-------- | :-------------------------- | :--------------------- | :---------------------------------------- |
| **Code**  | `*.{js,ts,astro,json...}`   | ESLint, Prettier       | 코드 스타일, 잠재적 오류, 타입 체크       |
| **Docs**  | `README.md`, `docs/**/*.md` | Prettier               | 마크다운 포맷팅                           |
| **Post**  | `src/pages/**/*.md`         | Custom QA (`audit.ts`) | 필수 섹션, 구조, 번역 상태, 인용구 오남용 |

---

## 2. 📝 포스트 파일 (`src/pages/**/*.md`) 작성 기준

블로그 포스트는 독자에게 직접 전달되는 콘텐츠이므로 가장 엄격한 기준이 적용됩니다.
`scripts/qa/audit.ts` 스크립트에 의해 검사됩니다.

### ✅ 필수 포함 항목 (Errors)

누락 시 **빌드 및 배포가 불가능(CI 실패)**합니다.

1.  **Frontmatter `date` 필드**
    - 빌드 시 정렬 기준이 되므로 필수입니다.
    - 예: `date: "2024-02-12"`
2.  **`💡 작성자 코멘트 (Insight)` 섹션** (한국어 포스트)
    - AdSense 품질 기준(E-E-A-T)을 충족하기 위해 필수입니다. AI가 아닌 사람의 경험을 증명해야 합니다.
    - 헤더: `## 💡 작성자 코멘트 (Insight)`
3.  **다국어 파일 내 한국어 제거**
    - 번역된 파일(`src/pages/en/...` 등)에 한국어 텍스트가 5개 이상 감지되면 에러 처리됩니다.
    - 번역 API 오류로 원본이 그대로 복사된 경우를 방지합니다.

### ⚠️ 권장 준수 항목 (Warnings)

누락 시 경고가 발생하며, 지속될 경우 품질 저하의 원인이 됩니다.

1.  **`🙋 자주 묻는 질문 (FAQ)` 섹션**
    - 사용자 편의를 위해 권장됩니다.
    - 헤더: `## 🙋 자주 묻는 질문 (FAQ)`
2.  **인용구(`>`) 사용 제한**
    - **규칙:** 이 프로젝트에서 인용구(`>`)는 **"프롬프트 복사 박스"** UI로 렌더링됩니다. 따라서 **`Basic`, `Pro`, `Prompt` (또는 해당 번역어)** 섹션 내에서만 사용해야 합니다.
    - **예외:** 이탤릭체(`> _인용문_`)는 서론의 훅(Hook) 용도로 어디서든 허용됩니다.
3.  **레거시 표(Table) 스타일 금지**
    - 모바일 가독성을 위해 난이도/효과성 표 대신 **이모지 리스트**를 사용하세요.
    - **Bad:** `| 난이도 | 효과성 |`
    - **Good:** `- ⭐ 난이도: ...`

---

## 3. 💻 코드 파일 (`*.js`, `*.ts`, `*.astro`) 작성 기준

- **Prettier:** 코드 포맷팅을 강제합니다. (들여쓰기, 세미콜론, 따옴표 등)
- **ESLint:** 잠재적인 버그와 안티 패턴을 검사합니다. (미사용 변수, 잘못된 import 등)
- **Type Check:** `tsc`를 통해 타입 안정성을 검증합니다. `any` 타입 사용을 지양하세요.

---

## 4. 📄 일반 문서 (`docs/*.md`) 작성 기준

- **Prettier:** 마크다운 표준 포맷을 따릅니다.
- **Link Check:** 깨진 링크가 없는지 확인합니다 (`lychee`). 외부 링크가 유효한지 주기적으로 검사합니다.

---

## 🚀 검사 방법

로컬에서 수동으로 검사를 실행하여 미리 문제를 파악할 수 있습니다.

```bash
# 1. 전체 포스트 품질 검사 (QA)
pnpm qa

# 2. 코드 및 문서 스타일 검사 (Lint)
pnpm lint

# 3. 특정 파일만 포맷팅 (Prettier)
npx prettier --write src/pages/posts/my-new-post.md
```
