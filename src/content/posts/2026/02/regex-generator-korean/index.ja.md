---
layout: /src/layouts/Layout.astro
title: "宇宙語のような正規表現(Regex)、日本語で注文してください"
author: "Zzabbis"
date: "2026-02-04"
updatedDate: "2026-02-04"
category: "コーディング/開発"
description: "複雑な正規表現を暗号解読のように頭を悩ませる必要はありません。希望のパターンを伝えるだけでAIが完璧な正規表現を作成してくれます。"
tags: ["正規表現", "Regex", "文字列処理", "有効性検査"]
---

# 📝 宇宙語のような正規表現(Regex)、日本語で注文してください

- **🎯 おすすめの対象:** ジュニア開発者、データアナリスト、マーケター
- **⏱️ 所要時間:** 30分 → 1分に短縮
- **🤖 おすすめのモデル:** すべての対話型AI (ChatGPT, Claude, Geminiなど)

- ⭐ **難易度:** ⭐⭐☆☆☆
- ⚡️ **効果性:** ⭐⭐⭐⭐⭐
- 🚀 **活用度:** ⭐⭐⭐⭐⭐

> _「正規表現を書くたびにStack Overflowをさまよい、暗号解読のような記号の羅列に頭を抱えていませんか？」_

正規表現（Regex）は文字列の検索やバリデーションに不可欠な強力なツールですが、その構文はまるで宇宙語のようで、一度書いたコードは数日後には自分でも読めなくなることがよくあります。
もうチートシートを睨みつけたり、括弧やエスケープ処理の位置で何時間も悩む必要はありません。AIに「どんな文字列を見つけたいか」を自然な言語で説明するだけで、完璧な正規表現とその詳しい解説をすぐに得ることができます。

---

## ⚡️ 3行まとめ (TL;DR)

1. 複雑な正規表現の作成はAIに任せ、人間はパターンの「ルール」定義に集中する。
2. 作成された正規表現だけでなく、それがどのように機能するかのステップごとの解説も一緒に求める。
3. エッジケース（例外状況）に対するテストケースも要求し、実務での確実性を検証する。

---

## 🚀 解決策: "Regexジェネレーター・プロンプト"

### 🥉 Basic Version (基本型)

素早く正規表現のコードだけが欲しい場合に使用してください。

> **役割:** あなたはシニア開発者です。
> **要求:** `[メールアドレス]`を検証するための正規表現を作成してください。

<br>

### 🥇 Pro Version (専門家型)

特定の言語に合わせた最適な正規表現と、詳細な解説、テストコードが必要な場合に使用してください。

> **役割 (Role):** あなたは正規表現(Regex)のマスターであり、10年の経験を持つシニアソフトウェアエンジニアです。
>
> **状況 (Context):**
>
> - 背景: ユーザーの入力データから特定のパターンを抽出、または検証する機能を作成しています。
> - 目標: バグのない安全で効率的な正規表現を作成し、その動作原理を正確に理解すること。
>
> **要求 (Task):**
>
> 1. 次の条件を満たす正規表現を作成してください: `[条件: 日本の携帯電話番号 (例: 090-1234-5678, 08012345678 の両方に対応)]`
> 2. `[使用言語: JavaScript]` でそのまま使用できるコードスニペットを提供してください。
> 3. 提供した正規表現の各パーツ（記号）が何を意味するのか、ステップバイステップで解説してください。
> 4. この正規表現がマッチする成功例と、マッチしない失敗例（エッジケース）をそれぞれ3つ以上提示してください。
>
> **制約事項 (Constraints):**
>
> - 出力形式は読みやすいマークダウンを使用してください。
> - コードには簡潔なコメントを含めてください。
> - ReDoS（正規表現サービス拒否攻撃）の脆弱性がない安全なパターンを提示してください。
>
> **注意事項 (Warning):**
>
> - 与えられた条件で処理しきれない極端なエッジケースがある場合は、その限界点も合わせて説明してください。

---

## 💡 作成者コメント (Insight)

正規表現は「書く」ことよりも「読む」こと、そして「検証する」ことの方がはるかに困難です。AIに単に正規表現を作らせるだけでなく、その**動作原理の解説**と**テストケース**を同時に要求することがこのプロンプトの核心です。
特に実務では、予想外のユーザー入力（エッジケース）によってバグが発生しやすいため、AIに失敗例を挙げさせることで、事前に脆弱性を防ぐことができます。また、ReDoS（悪意のある入力によるサーバーダウン）への対策を制約事項に入れることで、プロダクション環境でも安心してデプロイできるコードを得られます。

---

## 🙋 よくある質問 (FAQ)

- **Q: 特定のプログラミング言語（例えばPythonやGo）でも使えますか？**
  - A: はい、可能です。`[使用言語]`の部分を、現在使用している言語（例：Python、Go、Java）に変更するだけで、その言語の正規表現モジュール（`re`など）に合わせた最適なコードが出力されます。

- **Q: 既存の複雑な正規表現の意味を解読してもらうこともできますか？**
  - A: もちろんです。「状況」を「この正規表現の意味を解読したい」に変更し、「要求」に解読したい正規表現を貼り付ければ、各記号の意味を人間が理解できる言葉で丁寧に解説してくれます。

---

## 🧬 プロンプト解剖 (Why it works?)

1.  **Role（役割付与）:** 「正規表現マスター」というペルソナを与えることで、単なる文字列検索以上の、パフォーマンスと安全性を考慮した専門的な回答を引き出します。
2.  **Task（テストと解説の要求）:** 単に式を出力して終わるのではなく、「解説」と「成功/失敗例」を要求することで、AIのハルシネーション（もっともらしい嘘）を検証し、開発者自身のコード理解度を深めます。
3.  **Constraints（制約）:** 「ReDoS脆弱性の排除」を明記することで、セキュリティリスクを未然に防ぎ、実務レベルでそのまま使用可能な品質を確保します。

---

## 📊 証明: Before & After

### ❌ Before (これまでのやり方)

```javascript
// Stack Overflowからコピーしてきた、何をしているか分からないコード
const phoneRegex =
  /^(0[5-9]0[-(]?[0-9]{4}[-)]?[0-9]{4}|0120[-]?\d{1,3}[-]?\d{4})$/;
// 適用後、一部の正しい番号が弾かれたりするが、修正方法が分からない...
```

### ✅ After (プロンプト適用後の結果)

```javascript
/**
 * 日本の携帯電話番号を検証する正規表現
 * - 090, 080, 070から始まる11桁の番号
 * - ハイフンの有無（090-1234-5678 または 09012345678）の両方に対応
 */
const mobilePhoneRegex = /^0[789]0-?\d{4}-?\d{4}$/;

function isValidMobilePhone(number) {
  return mobilePhoneRegex.test(number);
}

// テストケース
console.log(isValidMobilePhone("090-1234-5678")); // true (成功)
console.log(isValidMobilePhone("08012345678")); // true (成功)
console.log(isValidMobilePhone("06-1234-5678")); // false (固定電話なので失敗)
console.log(isValidMobilePhone("090-123-5678")); // false (桁数不足により失敗)
```

_(AIはこれに加えて、`^`は行頭、`\d{4}`は数字4桁、などの詳細な解説も提供してくれます)_

---

## 🎯 結論

もう理解できない正規表現と格闘して時間を無駄にするのはやめましょう。
AIをあなたの専属「正規表現エンジニア」として活用し、素早く正確なパターン照合を実現してください。

さあ、これで定時退社しましょう！ 🍷
