---
layout: /src/layouts/Layout.astro
title: "汚いコード、1秒でクリーンコードにリファクタリングする"
author: "Zzabbis"
date: "2026-02-04"
updatedDate: "2026-02-04"
category: "コーディング/開発"
description: "複雑なスパゲッティコードを読みやすくメンテナンスしやすいクリーンコードに変換するプロンプトです。"
tags: ["リファクタリング", "クリーンコード", "メンテナンス", "開発生産性"]
---

# 📝 汚いコード、1秒でクリーンコードにリファクタリングする

- **🎯 推奨対象:** ジュニア開発者、コードレビューを控えているエンジニア、リファクタリングが必要なすべての人
- **⏱️ 所要時間:** 30分 → 1分（圧倒的な時短）
- **🤖 推奨モデル:** Claude 3.5 Sonnet（コーディングに最適）、GPT-4o

- ⭐ **難易度:** ⭐⭐☆☆☆
- ⚡️ **効果性:** ⭐⭐⭐⭐⭐
- 🚀 **活用度:** ⭐⭐⭐⭐⭐

> _「自分が書いたコードなのに、数日経つと何をしているのか全くわからない…このスパゲッティコード、どうやって解きほぐせばいい？」_

納期に追われて急いで書いたせいで、変数名はめちゃくちゃ、1つの関数が100行を超えてしまった経験は誰にでもあるはずです。
同僚にPull Requestを出すのが恥ずかしいそのコードを、**「クリーンコード(Clean Code)」の定石**に従って瞬時にリファクタリングしてくれる、あなた専属のシニアエンジニアがいたらどうでしょうか？
このプロンプト一つで、コードの可読性、パフォーマンス、そして保守性を劇的に向上させることができます。

---

## ⚡️ 3行要約 (TL;DR)

1. **直感的なネーミング:** 意味不明な変数名・関数名を、意図が明確に伝わる名前に自動変換します。
2. **単一責任の原則 (SRP):** 肥大化した関数を論理的に分割し、重複コードを排除します。
3. **モダンな文法の適用:** 使用言語の最新のベストプラクティスに基づき、より安全で効率的なコードへ最適化します。

---

## 🚀 解決策：「クリーンコード・リファクタラー」

### 🥉 Basic Version (基本形)

素早く結果だけが必要な場合に使用してください。

> **役割:** あなたは20年の経験を持つシニアソフトウェアエンジニアであり、「クリーンコード(Clean Code)」の専門家です。
> **リクエスト:** 以下の複雑なスパゲッティコードを、可読性が高く保守しやすいクリーンコードにリファクタリングしてください。

<br>

### 🥇 Pro Version (専門家形)

より詳細で高品質なリファクタリングが必要な場合に使用してください。

> **役割 (Role):** あなたは20年の経験を持つ最高峰のシニアソフトウェアエンジニアであり、「クリーンコード(Clean Code)」と「SOLID原則」の絶対的な専門家です。
>
> **状況 (Context):**
>
> - 背景: 私が作成したコードは機能的に動作しますが、可読性が非常に低く、今後の保守が困難な状態です。変数名が不明瞭で、重複したロジックが散見されます。
> - 目標: 同僚がコードレビューで一目見て理解できるレベルの、美しく堅牢なコードに変換すること。
>
> **リクエスト (Task):**
>
> 以下に提供するコードを、次の基準に従ってリファクタリングしてください：
>
> 1. **ネーミング:** 変数名と関数名は、その役割と意図が明確に伝わるように変更してください（マジックナンバーは定数化すること）。
> 2. **関数の分離:** 単一責任の原則（SRP）に基づき、1つの関数が1つのタスクのみを実行するように小さく分割してください。
> 3. **重複の排除:** 繰り返されるロジックは、独立した関数やユーティリティとして抽出してください。
> 4. **コメント:** コードが「何を(What)」しているかではなく、「なぜ(Why)」そのように実装されたのかを説明するコメントのみを追加してください。
> 5. **モダンな文法:** 該当言語の最新かつ安全なベストプラクティス（例：JSならES6+）を適用してください。
>
> **対象コード:**
>
> ```
> [ここにリファクタリングしたいコードを貼り付けてください]
> ```
>
> **制約事項 (Constraints):**
>
> - 既存コードのビジネスロジック（実際の動作や出力結果）は**絶対に変更しないでください**。
> - リファクタリング前後の主な変更点と、なぜそのように変更したのかの理由を箇条書きで簡潔に説明してください。
> - 出力形式は、Markdownのコードブロック（リファクタリング後のコード）と説明ブロックに分けて提示してください。

---

## 💡 作成者のコメント (Insight)

このプロンプトの真の価値は、単にコードを短くすることではなく、「他人が読みやすいコード」の基準をAIに強制する点にあります。特にジュニアエンジニアの場合、動作するコードを書くことで精一杯になりがちですが、このプロンプトを通すことで、シニアエンジニアからコードレビューを受けているような学習効果も得られます。

**💡 実務での活用Tips:**
対象コードを貼り付ける際に、`[対象コード]`の前に「このコードはショッピングカートの合計金額を計算するロジックです」といった簡単なコンテキストを1行添えるだけで、AIが提案する関数名や変数名の精度が飛躍的に向上します。

---

## 🙋 よくある質問 (FAQ)

- **Q: どんなプログラミング言語でも対応可能ですか？**
  - A: はい、Python、JavaScript/TypeScript、Java、C++、Goなど、主要な言語はすべて対応可能です。AIが自動的に言語を判別して最適な文法を適用します。

- **Q: 会社の機密コードをそのまま入力しても大丈夫ですか？**
  - A: セキュリティの観点から、APIキー、パスワード、個人情報などは必ずマスクするか削除してから入力してください。また、パブリックなAIに入力する場合は、機密性の高いコアロジックの入力は避けることをお勧めします。

- **Q: AIがロジックを壊してバグを発生させることはありませんか？**
  - A: 制約事項で「ビジネスロジックは変更しない」と指示していますが、AIも完璧ではありません。リファクタリング後は、必ずユニットテストを実行するか、動作確認を行って機能が保持されていることを検証してください。

---

## 🧬 プロンプト解剖 (Why it works?)

1. **Roleの明確化:** 「20年目のシニアエンジニア」「クリーンコードの専門家」というペルソナを与えることで、単なる文法的な修正ではなく、設計思想に基づいた高品質なリファクタリングを引き出しています。
2. **具体的な評価基準の提示:** 「SRP（単一責任の原則）」「マジックナンバーの定数化」「Whyを説明するコメント」など、明確なガイドラインを設定することで、AIの修正方向を厳密にコントロールしています。
3. **安全装置（Constraints）:** 「ビジネスロジックは絶対に変更しない」という強い制約を設けることで、リファクタリングの過程で意図しないバグが混入するリスク（ハルシネーション）を最小限に抑えています。

---

## 📊 証明: Before & After

### ❌ Before (入力)

```javascript
function calc(d) {
  let t = 0;
  for (let i = 0; i < d.length; i++) {
    if (d[i].price > 100) {
      t += d[i].price * 0.9;
    } else {
      t += d[i].price;
    }
  }
  return t;
}
```

### ✅ After (結果)

```javascript
/**
 * ショッピングカートの合計金額を計算します。
 * 100円を超える商品には10%の割引が適用されます。
 */
function calculateTotalPrice(items) {
  const DISCOUNT_THRESHOLD = 100;
  const DISCOUNT_RATE = 0.9;

  return items.reduce((total, item) => {
    const finalPrice =
      item.price > DISCOUNT_THRESHOLD ? item.price * DISCOUNT_RATE : item.price;

    return total + finalPrice;
  }, 0);
}
```

_**💡 変更のポイント:** `calc` を `calculateTotalPrice` に変更、引数 `d` を `items` に変更、マジックナンバー（100、0.9）を定数化し意図を明確化、`for`ループをモダンな `reduce` メソッドに置き換え。_

---

## 🎯 結論

「時間がある時に後で直そう」という言葉は、開発の世界では「永遠に直さない」と同義です。
技術的負債をため込む前に、このプロンプトを使ってたった3秒でコードをリファクタリングしましょう。美しく整ったコードとともに、今日も定時退社を勝ち取ってください！ 🍷
