---
title: "プロンプトでの区切り文字の使用：なぜXMLタグが重要なのか"
date: "2026-02-15"
description: "LLMプロンプト作成時にデータと指示を明確に区別する方法と、XMLタグが最も効果的な理由を学びます。"
---

大規模言語モデル（LLM）を使用する際に最もよくある間違いの一つは、指示（System Prompt）とデータ（User Input）を明確に区別しないことです。これにより、モデルがデータを指示として誤認したり、意図しない結果を生成するハルシネーションが発生する可能性があります。

この問題を解決する最も確実な方法は、**区切り文字（Delimiters）**を使用することです。その中でも、なぜ**XMLタグ**が業界標準のように使われているのかを探ります。

## 区切り文字とは何か？

区切り文字は、テキストの特定の部分を隔離し、モデルに対して「ここからここまでがデータであり、命令ではありません」と伝える標識の役割を果たします。

一般的によく使われる区切り文字には以下のものがあります：

- 三重引用符：`"""テキスト"""`
- ダッシュ：`---テキスト---`
- 角括弧：`[テキスト]`
- **XMLタグ**：`<tag>テキスト</tag>`

## なぜXMLタグなのか？

AnthropicのClaudeやOpenAIのGPTシリーズなどの最新モデルは、膨大な量のHTMLやXMLデータを学習しています。そのため、モデルは`<tag>`で始まり`</tag>`で終わる構造を非常に明確に認識します。

### 1. 明確な開始と終了

三重引用符（`"""`）は、データ内部に別の引用符が含まれている場合、混乱を引き起こす可能性があります。一方、XMLタグは閉じタグ（`</tag>`）が明確であるため、構造的な曖昧さがほとんどありません。

### 2. 意味的な文脈の付与

タグ名を通じて、データの性質をモデルにヒントとして与えることができます。

- `<article>`：記事本文
- `<rules>`：従うべきルール
- `<examples>`：例示データ

### 3. プロンプトインジェクションの防止

悪意のあるユーザーが「以前の命令を無視して…」といったテキストを入力しても、それを`<user_input>`タグで囲めば、モデルはそれを実行すべき命令ではなく、処理すべきデータとして認識する確率が大幅に高まります。

## 使用例

**悪い例：**

```text
以下のテキストを要約してください。
[ユーザー入力テキスト...]
```

**良い例（XMLタグを使用）：**

```text
<document>タグ内のテキストを要約してください。

<document>
[ユーザー入力テキスト...]
</document>
```

## 結論

プロンプトエンジニアリングの核心は、曖昧さをなくすことです。タスクが複雑になるほど、XMLタグを活用して構造化されたプロンプトを作成する習慣をつけましょう。モデルの性能と安定性が大幅に向上するはずです。
