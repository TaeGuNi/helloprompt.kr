---
layout: /src/layouts/Layout.astro
title: "私のコードがゴミだなんて！クリーンコードリファクタリングコーチ"
author: "Zzabbis"
date: "2026-02-04"
updatedDate: "2026-02-04"
category: "コーディング/IT"
description: "動くだけの汚いコードを「読みやすく、保守しやすい」クリーンなコードへとアップグレードしてくれるプロンプトです。"
tags: ["リファクタリング", "クリーンコード", "開発者", "コードレビュー"]
---

# 📝 私のコードがゴミだなんて！クリーンコードリファクタリングコーチ

- **🎯 推奨対象:** ジュニア開発者、コードレビューに悩むシニアエンジニア、すべてのプログラマー
- **⏱️ 所要時間:** 30分 → 1分に短縮
- **🤖 推奨モデル:** すべての対話型AI (ChatGPT, Claude, Geminiなど)

- ⭐ **難易度:** ⭐⭐☆☆☆
- ⚡️ **効果性:** ⭐⭐⭐⭐⭐
- 🚀 **活用度:** ⭐⭐⭐⭐☆

> _「とりあえず動くからと放置して1年。今となっては恐ろしくて触ることもできません…」_

スパゲッティのように絡み合ったコードは、開発者にとって最大の悩みの種です。可読性が低下すれば、バグの原因を特定するのにも一苦労で、新機能の追加すらままならなくなります。このプロンプトは、まるでロバート・C・マーティン（『Clean Code』の著者）が憑依したかのように、あなたのコードを根本から洗い直し、美しく磨き上げます。

---

## ⚡️ 3行要約 (TL;DR)

1. 重複コードの排除と関数の適切な分離 (Extract Method)
2. 意味が不明確な変数名・関数名の改善 (Naming Convention)
3. パフォーマンスの最適化と最新構文 (Modern Syntax) の適用

---

## 🚀 解決策：「クリーンコード・クリーニング店」

### 🥉 Basic Version (基本形)

細かい指示を出さず、素早く結果だけを得たい場合に使用してください。

> **役割:** あなたは`[クリーンコードの伝道師であり、シニアアーキテクト]`です。
> **リクエスト:** 私の書いた「動くだけの汚いコード」を、可読性が高く保守しやすい「クリーンなコード」へとリファクタリングしてください。

<br>

### 🥇 Pro Version (専門家形)

より詳細な解説や、高品質なリファクタリング結果が必要な場合に使用してください。

> **役割 (Role):** あなたは`[クリーンコードの伝道師であり、シニアアーキテクト]`です。
>
> **状況 (Context):**
>
> - 背景: 私のコードは一応機能していますが、非常に読みにくく「Dirty Code」の状態です。
> - 目標: 今後の保守運用が容易になるよう、ベストプラクティスに従ってリファクタリングを行うこと。
>
> **タスク (Task):**
>
> 1. **[ネーミングの改善]**: 変数名と関数名を、直感的で意味がはっきりと伝わるものに変更してください。（例：`a` -> `userAge`）
> 2. **[構造の改善]**: 長すぎる関数は単一責任の原則に従って適切に分割し、重複するロジックは一つにまとめてください。
> 3. **[最新化 (Modernize)]**: 可能であれば、対象言語の最新の構文（例: ES6+、Python 3.10+など）を適用して最適化してください。
> 4. **[Before & Afterの解説]**: 変更前と変更後で何がどう変わったのかを比較し、なぜそのように変更したのか、アーキテクチャの観点から理由を説明してください。
>
> **制約事項 (Constraints):**
>
> - コードの本来の動作（ビジネスロジック）は絶対に変わってはいけません。
> - コメントは、コード自体では表現しきれない「なぜ(Why)」を説明する必要な箇所にのみ残し、コードを読めばわかる冗長なコメントは削除してください。
>
> **対象コード (Input):**
>
> `[ここにリファクタリングしたいコードを貼り付けてください]`

---

## 💡 作成者コメント (Insight)

このプロンプトの真の価値は、単にコードを綺麗にするだけでなく、「なぜそのように修正すべきなのか」という**アーキテクト視点での解説**を得られる点にあります。
特にジュニア開発者の方にとっては、シニアエンジニアからマンツーマンでコードレビューを受けているような学習効果が期待できます。実際の業務では、レガシーコードを解読する際や、PR（プルリクエスト）を作成する前にセルフレビューを行う目的で活用すると、コードの品質が劇的に向上します。

---

## 🙋 よくある質問 (FAQ)

- **Q: どんなプログラミング言語でも対応可能ですか？**
  - A: はい、Python、JavaScript、Java、C++など、主要な言語のほとんどに対応しています。AIが対象コードの言語を自動的に判別し、その言語のベストプラクティス（PythonならPEP 8など）を適用してくれます。

- **Q: 会社の業務コードをそのまま貼り付けても大丈夫ですか？**
  - A: セキュリティの観点から、機密情報（APIキー、パスワード、個人情報、独自の社内ビジネスロジックの中核部分）は必ずダミーデータに置き換えるか、マスキングしてから入力するようにしてください。

---

## 🧬 プロンプト解剖 (Why it works?)

1. **Role（役割）の付与:** 「シニアアーキテクト」というペルソナを設定することで、AIは単なる文法エラーの修正にとどまらず、設計思想に基づいた高度なリファクタリングを提案するようになります。
2. **Task（タスク）の構造化:** ネーミング、構造、最新化、解説という4つの具体的なステップを指示することで、修正の意図が明確な質の高い回答を引き出します。
3. **Constraints（制約）による安全性の確保:** 「動作を変えない」「不要なコメントは消す」というルールを課すことで、本番環境に適用しにくい予期せぬ改変（ハルシネーション）を防いでいます。

---

## 📊 証明: Before & After

### ❌ Before (入力)

```python
def calc(x, y):
    if x > 19:
        print("Adult")
        p = y * 0.9
        return p
    else:
        print("Student")
        return y
```

_(問題点: 関数名 `calc` では何を計算しているのか不明確であり、変数 `x` と `y`、`p` の意味も文脈から読み取れません。マジックナンバーも散見されます。)_

### ✅ After (プロンプト適用後)

```python
def calculate_discounted_price(age: int, base_price: float) -> float:
    """年齢に基づき割引適用後の価格を計算する"""
    ADULT_AGE_THRESHOLD = 20
    DISCOUNT_RATE = 0.9

    if age >= ADULT_AGE_THRESHOLD:
        print("You are an adult.")
        return base_price * DISCOUNT_RATE

    print("You are a student.")
    return base_price
```

**[改善ポイント]**

1. **命名規則の改善**: `calc` -> `calculate_discounted_price` に変更し、何をする関数なのかが一目でわかるようになりました。引数名も `age`, `base_price` と明確化されています。
2. **マジックナンバーの排除**: `19` や `0.9` といった意図不明な数字を定数 (`ADULT_AGE_THRESHOLD`, `DISCOUNT_RATE`) として定義し、意味を持たせました。
3. **Early Returnパターンの適用**: 不要な `else` ブロックを削除し、コードのネスト（インデント）を浅くすることで可読性を高めました。
4. **型ヒントの追加**: Pythonのモダンな構文である型ヒント (`int`, `float`) を追加し、保守性を向上させました。

---

## 🎯 結論

美しく整理されたコードは、名文で綴られたエッセイのようにすらすらと読めるものです。未来の自分、そしてチームの仲間のために、日々のコードのクリーニングを習慣づけましょう。

コードが綺麗になったら、さっさと定時で退社してリフレッシュしてください。メンテナンスすべきは、コードよりもあなたの身体ですよ。 🍷
