---
interface Props {
  className?: string;
  lang?: string;
}

const { className = "", lang = "ko" } = Astro.props;

// ë²ˆì—­ ë°ì´í„° (House Ads)
const i18n = {
  ko: {
    b1: {
      title: "AI í”„ë¡¬í”„íŠ¸ ë§ˆìŠ¤í„°í•˜ê¸°",
      desc: "ì´ˆë³´ìë„ ì‰½ê²Œ ë”°ë¼í•˜ëŠ” í”„ë¡¬í”„íŠ¸ ì‘ì„± ê°€ì´ë“œë¥¼ í™•ì¸í•˜ì„¸ìš”.",
      cta: "ê°€ì´ë“œ ë³´ê¸°",
    },
    b2: {
      title: "ìˆ¨ê²¨ì§„ ê¿€íŒ ë°œê²¬í•˜ê¸°",
      desc: "ì—…ë¬´ íš¨ìœ¨ì„ 200% ë†’ì—¬ì£¼ëŠ” AI í™œìš© ì‚¬ë¡€ ëª¨ìŒ",
      cta: "ê¿€íŒ í™•ì¸",
    },
    b3: {
      title: "ë§¤ì¼ ìƒˆë¡œìš´ ì˜ê°",
      desc: "ì°½ì˜ì ì¸ ê¸€ì“°ê¸°ì™€ ê·¸ë¦¼ì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬",
      cta: "ì „ì²´ ê¸€ ë³´ê¸°",
    },
  },
  en: {
    b1: {
      title: "Master AI Prompts",
      desc: "Check out the easy-to-follow prompt writing guide for beginners.",
      cta: "Read Guide",
    },
    b2: {
      title: "Discover Hidden Tips",
      desc: "Collection of AI use cases that boost work efficiency by 200%.",
      cta: "Check Tips",
    },
    b3: {
      title: "Daily Inspiration",
      desc: "Prompt library for creative writing and drawing.",
      cta: "View All Posts",
    },
  },
  ja: {
    b1: {
      title: "AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹",
      desc: "åˆå¿ƒè€…ã§ã‚‚ç°¡å˜ã«å®Ÿè·µã§ãã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆã‚¬ã‚¤ãƒ‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",
      cta: "ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ã‚‹",
    },
    b2: {
      title: "éš ã‚ŒãŸãƒ’ãƒ³ãƒˆã‚’ç™ºè¦‹",
      desc: "æ¥­å‹™åŠ¹ç‡ã‚’200%å‘ä¸Šã•ã›ã‚‹AIæ´»ç”¨äº‹ä¾‹é›†ã€‚",
      cta: "ãƒ’ãƒ³ãƒˆã‚’ç¢ºèª",
    },
    b3: {
      title: "æ¯æ—¥ã®æ–°ã—ã„ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
      desc: "å‰µé€ çš„ãªåŸ·ç­†ã‚„æç”»ã®ãŸã‚ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚",
      cta: "ã™ã¹ã¦ã®æŠ•ç¨¿ã‚’è¦‹ã‚‹",
    },
  },
  zh: {
    b1: {
      title: "ç²¾é€š AI æç¤ºè¯",
      desc: "æŸ¥çœ‹é€‚åˆåˆå­¦è€…çš„ç®€å•æç¤ºè¯ç¼–å†™æŒ‡å—ã€‚",
      cta: "é˜…è¯»æŒ‡å—",
    },
    b2: {
      title: "å‘ç°éšè—æŠ€å·§",
      desc: "æå‡ 200% å·¥ä½œæ•ˆç‡çš„ AI åº”ç”¨æ¡ˆä¾‹åˆé›†ã€‚",
      cta: "æŸ¥çœ‹æŠ€å·§",
    },
    b3: {
      title: "æ¯æ—¥æ–°çµæ„Ÿ",
      desc: "ç”¨äºåˆ›æ„å†™ä½œå’Œç»˜ç”»çš„æç¤ºè¯åº“ã€‚",
      cta: "æŸ¥çœ‹æ‰€æœ‰æ–‡ç« ",
    },
  },
  // Default to English for others
};

// ì–¸ì–´ ì„¤ì • (Fallback to English)
const t = i18n[lang as keyof typeof i18n] || i18n.en;

// ë§í¬ ìƒì„± ìœ í‹¸ë¦¬í‹°
const getLink = (path: string) => {
  if (lang === "ko") return path;
  return `/${lang}${path}`;
};

// íƒœê·¸ ë§í¬ (ì–¸ì–´ë³„ë¡œ íƒœê·¸ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‚˜, ì¼ë‹¨ ê³µí†µ íƒœê·¸ 'ChatGPT' ë“±ì„ í™œìš©í•˜ê±°ë‚˜ í™ˆìœ¼ë¡œ ì—°ê²°)
// í˜„ì¬ ì‹œìŠ¤í…œìƒ íƒœê·¸ë„ ë²ˆì—­ë˜ì–´ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì˜ì–´ê¶Œì—ì„œëŠ” ì˜ì–´ íƒœê·¸ë¡œ ìœ ë„í•´ì•¼ í•¨.
// ì—¬ê¸°ì„œëŠ” ì•ˆì „í•˜ê²Œ 'ChatGPT' (ê³µí†µ) ë˜ëŠ” í™ˆìœ¼ë¡œ ìœ ë„.
// ë‹¨, í•œêµ­ì–´ëŠ” ê¸°ì¡´ëŒ€ë¡œ ìœ ì§€.

const getTagLink = (koreanTag: string, fallbackTag: string = "ChatGPT") => {
  if (lang === "ko") return `/tags/${koreanTag}`;
  // ë‹¤ë¥¸ ì–¸ì–´ëŠ” í•´ë‹¹ íƒœê·¸ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì‹¤í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ,
  // ì•ˆì „í•˜ê²Œ fallbackTag(ChatGPT)ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ í™ˆìœ¼ë¡œ ë³´ëƒ„.
  // ì—¬ê¸°ì„œëŠ” ChatGPT íƒœê·¸ê°€ ë²ˆì—­ë³¸ì—ë„ ë§ì´ ì“°ì´ë¯€ë¡œ ì‹œë„í•´ë´„.
  return `/${lang}/tags/${fallbackTag}`;
};

const banners = [
  {
    icon: "ğŸš€",
    title: t.b1.title,
    desc: t.b1.desc,
    link: getTagLink("AIí”„ë¡¬í”„íŠ¸", "ChatGPT"), // EN: /en/tags/ChatGPT
    cta: t.b1.cta,
    color: "from-blue-500/20 to-purple-500/20",
    border: "border-blue-500/30",
  },
  {
    icon: "ğŸ’",
    title: t.b2.title,
    desc: t.b2.desc,
    link: getTagLink("ChatGPT", "ChatGPT"), // EN: /en/tags/ChatGPT
    cta: t.b2.cta,
    color: "from-emerald-500/20 to-cyan-500/20",
    border: "border-emerald-500/30",
  },
  {
    icon: "âœ¨",
    title: t.b3.title,
    desc: t.b3.desc,
    link: getLink("/"), // EN: /en/
    cta: t.b3.cta,
    color: "from-amber-500/20 to-orange-500/20",
    border: "border-amber-500/30",
  },
];

// ëœë¤í•˜ê²Œ í•˜ë‚˜ ì„ íƒ
const banner = banners[Math.floor(Math.random() * banners.length)];
---

<a
  href={banner.link}
  class={`group relative flex items-center justify-between w-full p-6 overflow-hidden rounded-lg border ${banner.border} bg-gradient-to-br ${banner.color} hover:opacity-90 transition-all duration-300 no-underline ${className}`}
>
  <div class="flex items-center gap-4 z-10">
    <span class="text-3xl filter drop-shadow-lg">{banner.icon}</span>
    <div class="flex flex-col">
      <span
        class="text-sm font-bold text-white group-hover:text-cyan-300 transition-colors"
      >
        {banner.title}
      </span>
      <span class="text-xs text-gray-300 mt-1 line-clamp-1">
        {banner.desc}
      </span>
    </div>
  </div>

  <div class="flex items-center z-10">
    <span
      class="px-3 py-1.5 text-[10px] font-bold uppercase tracking-wider text-white bg-white/10 rounded-full border border-white/10 group-hover:bg-white/20 transition-all"
    >
      {banner.cta} &rarr;
    </span>
  </div>

  <!-- Background Effect -->
  <div
    class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:animate-shimmer"
  >
  </div>
</a>

<style>
  @keyframes shimmer {
    100% {
      transform: translateX(100%);
    }
  }
  .animate-shimmer {
    animation: shimmer 1.5s infinite;
  }
</style>
