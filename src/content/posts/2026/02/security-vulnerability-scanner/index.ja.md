---
layout: /src/layouts/Layout.astro
title: "私のコードがハッキングされるかもしれない？AI保安官の脆弱性点検"
author: "Zzabbis"
date: "2026-02-04"
updatedDate: "2026-02-04"
category: "コーディング/開発"
description: "SQLインジェクションやXSSなど、コードに潜むセキュリティ脆弱性を発見し、安全なパッチコードを提案させるプロンプトです。"
tags:
  [
    "セキュリティ",
    "ハッキング防御",
    "脆弱性点検",
    "セキュアコーディング",
    "OWASP",
  ]
---

# 📝 私のコードがハッキングされるかもしれない？AI保安官の脆弱性点検

- **🎯 おすすめの対象:** エンジニア、プロジェクトマネージャー、開発初学者
- **⏱️ 所要時間:** 5分 → 1分に短縮
- **🤖 おすすめのモデル:** すべての対話型AI (ChatGPT, Claude, Geminiなど)

- ⭐ **難易度:** ⭐⭐☆☆☆
- ⚡️ **効果性:** ⭐⭐⭐⭐⭐
- 🚀 **活用度:** ⭐⭐⭐⭐☆

> _「まさか自分のトイプロジェクトがハッキングされるわけないだろう」_

そう思っていませんか？ 現実には、自動化されたボットが24時間365日インターネットを巡回し、脆弱なサーバーを探し回っています。
たった1回のSQLインジェクションでデータベースが丸ごと流出したり、XSS攻撃でユーザーのCookieが奪取される危険性があります。
本番環境にデプロイする前に、AI保安官にコードをチェックさせ、「セキュアコーディング (Secure Coding)」の処方箋を受け取りましょう。

---

## ⚡️ 3行まとめ (TL;DR)

1. コード内に潜む潜在的なセキュリティ脆弱性（SQL Injection、XSSなど）を瞬時に特定します。
2. OWASP Top 10の基準に基づき、危険度と攻撃シナリオを分析します。
3. 脆弱性を根本から解決する安全な修正コード（Secure Code）を提案させます。

---

## 🚀 解決策：「セキュリティ脆弱性スキャナー」

### 🥉 Basic Version (基本形)

素早く結果だけが必要な場合に使用してください。

> **役割:** あなたはホワイトハッカーであり、サイバーセキュリティの専門家です。
> **リクエスト:** 提供するコードを分析し、SQLインジェクションやXSSなどのセキュリティ脆弱性を見つけ出し、パッチコードを提案してください。

<br>

### 🥇 Pro Version (専門家形)

詳細な分析と高品質な修正コードが必要な場合に使用してください。

> **役割 (Role):** あなたはホワイトハッカーであり、百戦錬磨のサイバーセキュリティ専門家です。
>
> **状況 (Context):**
>
> - 背景: 私が作成したコードに、セキュリティ上危険な部分が含まれていないか点検したいと考えています。
> - 目標: 潜在的な脆弱性を発見し、安全なコードへとリファクタリングすることです。
>
> **タスク (Task):**
>
> 1. 以下のコードを分析し、**セキュリティ脆弱性 (Vulnerability)** をすべて洗い出してください。
> 2. 各脆弱性がどのような攻撃（例: SQL Injection, XSS）に悪用される可能性があるか、具体的なシナリオを説明してください。
> 3. その脆弱性を根本的に解決した**安全なコード (Secure Code)** を作成してください。
>
> **分析対象コード:**
> `[ここに疑わしいコードを貼り付けてください]`
>
> **制約事項 (Constraints):**
>
> - OWASP Top 10の脆弱性基準を優先的に検討してください。
> - 単に「危険だ」と指摘するだけでなく、「どのように攻撃されるか」というシナリオを簡潔に記載してください。
>
> **注意事項 (Warning):**
>
> - 確証のない脆弱性をでっち上げないでください。（ハルシネーションの防止）

---

## 💡 作成者のコメント (Insight)

このプロンプトは、特に急ぎのリリース前や、普段書き慣れていない言語・フレームワークで開発している際に絶大な威力を発揮します。人間が見落としがちなエッジケースや、最新のOWASP基準に照らし合わせたチェックをAIが瞬時に行ってくれるため、コードレビューの時間を大幅に削減できます。もしAIが「安全です」と答えた場合でも、入力値のバリデーションやサニタイズ処理が本当に十分か、念のためもう一度確認する癖をつけるとより完璧です。

---

## 🙋 よくある質問 (FAQ)

- **Q: 業務用の社外秘コードを入力しても大丈夫ですか？**
  - A: 機密情報や個人情報、重要なAPIキーなどは絶対にマスキングしてから入力してください。また、エンタープライズ版のAIモデルなど、学習に利用されない環境（オプトアウト設定済み）での使用を強く推奨します。

- **Q: どのようなプログラミング言語でも対応可能ですか？**
  - A: はい、Python、PHP、JavaScript、Java、Goなど、主要な言語やフレームワークのほとんどに対応しています。ただし、ニッチな言語の場合はAIが文脈を誤解する可能性があるため、プロンプトの「状況」に言語名を明記すると精度が上がります。

---

## 🧬 プロンプト解剖 (Why it works?)

1. **Roleの付与:** 「ホワイトハッカー」というペルソナを与えることで、AIの出力が単なる文法チェックから、悪意のある攻撃者の視点に立った厳格なセキュリティ診断へと変化します。
2. **OWASP基準の明記:** グローバルスタンダードである「OWASP Top 10」を基準に指定することで、場当たり的ではない、体系的で信頼性の高い分析結果を引き出しています。

---

## 📊 証明: Before & After

### ❌ Before (入力)

```php
$username = $_POST['user'];
$query = "SELECT * FROM users WHERE name = '" . $username . "'";
$db->query($query);
```

### ✅ After (結果)

**🚨 発見された脆弱性:** **SQL Injection**
攻撃者が `$username` に `' OR '1'='1` のような値を入力すると、クエリが `SELECT * FROM users WHERE name = '' OR '1'='1'` になり、すべてのユーザー情報を不正に閲覧される危険性があります。

**🛡️ 修正されたコード (Prepared Statement 使用):**

```php
$stmt = $db->prepare("SELECT * FROM users WHERE name = ?");
$stmt->bind_param("s", $_POST['user']);
$stmt->execute();
```

_説明: 入力値をクエリの一部としてではなく、純粋なデータとして処理するように `prepare` と `bind_param` を使用し、インジェクション攻撃を根本から遮断しました。_

---

## 🎯 結論

セキュリティ事故は、一度起きてしまってからでは取り返しがつきません。
「牛を失ってから牛舎を直す（後の祭り）」ことわざの主人公にならないでください。デプロイ前にコードを一行直すだけで、大惨事を未然に防ぐことができます。

さあ、安全なコードで安心して退勤しましょう！ 🍷
