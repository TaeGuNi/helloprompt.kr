---
layout: /src/layouts/Layout.astro
title: "Docker ç¯å¢ƒæ„å»ºï¼Œä¸€ä¸ªé…ç½®æ–‡ä»¶ 3 åˆ†é’Ÿæå®š"
author: "Zzabbis"
date: "2026-02-04"
updatedDate: "2026-02-04"
category: "ç¼–ç /å¼€å‘"
description: "è‡ªåŠ¨ç”Ÿæˆç”¨äºå°†åº”ç”¨ç¨‹åºè¿è¡Œç¯å¢ƒåˆ¶ä½œæˆå®¹å™¨çš„ Dockerfile å’Œ docker-compose.yml çš„æç¤ºè¯ã€‚"
tags: ["Docker", "å®¹å™¨", "éƒ¨ç½²", "DevOps"]
---

# ğŸ“ Docker ç¯å¢ƒæ„å»ºï¼Œä¸€ä¸ªé…ç½®æ–‡ä»¶ 3 åˆ†é’Ÿæå®š

> **ğŸ¯ æ¨èå¯¹è±¡:** æ‰€æœ‰äºº
> **â±ï¸ æ‰€éœ€æ—¶é—´:** 5 åˆ†é’Ÿ
> **ğŸ¤– æ¨èæ¨¡å‹:** æ‰€æœ‰ AI æ¨¡å‹

|  éš¾åº¦   |   æœ‰æ•ˆæ€§   |  å®ç”¨æ€§   |
| :-----: | :--------: | :-------: |
| â­â­â˜†â˜†â˜† | â­â­â­â­â­ | â­â­â­â­â˜† |

_â€œå› ä¸ºéƒ¨ç½²æœåŠ¡å™¨ä¸Šçš„ Node.js ç‰ˆæœ¬ä¸åŒè€Œå‡ºé”™...â€_

å¼€å‘ç¯å¢ƒå’Œè¿è¥ç¯å¢ƒçš„ä¸ä¸€è‡´æ˜¯æ‰€æœ‰å¼€å‘è€…çš„æ•Œäººã€‚
è™½ç„¶çŸ¥é“ç”¨ Docker å°±èƒ½è§£å†³ï¼Œä½†ç¼–å†™ `Dockerfile` å’Œä¼˜åŒ–é•œåƒæ„å»ºåˆæ˜¯å¦ä¸€ä¸ªéšœç¢ã€‚
åªè¦å‘Šè¯‰é¡¹ç›®æ ˆã€‚AI ä¼šä¸ºä½ åˆ¶å®šä¼˜åŒ–çš„ Docker é…ç½®æ–‡ä»¶ã€‚

---

## âš¡ï¸ 3 è¡Œæ€»ç»“ (TL;DR)

1. ç”Ÿæˆé’ˆå¯¹è¯­è¨€/æ¡†æ¶ä¼˜åŒ–çš„ `Dockerfile`
2. ç¼–å†™åŒ…å« DBã€ç¼“å­˜ç­‰çš„ `docker-compose.yml`
3. åº”ç”¨é•œåƒå®¹é‡ä¼˜åŒ– (Multi-stage Build)

---

## ğŸš€ è§£å†³æ–¹æ¡ˆï¼šâ€œDockeråŒ–ä¸“å®¶â€

### ğŸ¥‰ Basic Version (åŸºç¡€ç‰ˆ)

å½“ä½ åªéœ€è¦å¿«é€Ÿç»“æœæ—¶ä½¿ç”¨ã€‚

> **è§’è‰²:** ä½ æ˜¯å®¹å™¨ç¼–æ’ä¸“å®¶åŠ DevOps å·¥ç¨‹å¸ˆã€‚
> **è¯·æ±‚:** è¯·åˆ¶ä½œè‡ªåŠ¨ç”Ÿæˆç”¨äºå°†åº”ç”¨ç¨‹åºè¿è¡Œç¯å¢ƒåˆ¶ä½œæˆå®¹å™¨çš„ Dockerfile å’Œ docker-compose.yml çš„æç¤ºè¯ã€‚

<br>

### ğŸ¥‡ Pro Version (ä¸“å®¶ç‰ˆ)

å½“ä½ éœ€è¦è¯¦ç»†è´¨é‡æ—¶ä½¿ç”¨ã€‚

è¯·å¤åˆ¶ä»¥ä¸‹ **PROMPT** å†…å®¹ä½¿ç”¨ã€‚

> **è§’è‰² (Role):** ä½ æ˜¯å®¹å™¨ç¼–æ’ä¸“å®¶åŠ DevOps å·¥ç¨‹å¸ˆã€‚
>
> **æƒ…å†µ (Context):** æˆ‘æƒ³æŠŠæˆ‘çš„åº”ç”¨ç¨‹åºéƒ¨ç½²ä¸º Docker å®¹å™¨ã€‚æˆ‘æƒ³ç»Ÿä¸€æœ¬åœ°å¼€å‘ç¯å¢ƒå’Œéƒ¨ç½²ç¯å¢ƒã€‚
>
> **ä»»åŠ¡ (Task):**
>
> 1. è¯·ç¼–å†™ç¬¦åˆä»¥ä¸‹æŠ€æœ¯æ ˆçš„ä¼˜åŒ– **Dockerfile**ã€‚(å»ºè®®ä½¿ç”¨ Multi-stage build)
> 2. è¯·ç¼–å†™åŒ…å«ä¸è¯¥ App è”åŠ¨çš„æ•°æ®åº“ç­‰çš„ **docker-compose.yml** æ–‡ä»¶ã€‚
> 3. ä¹Ÿè¯·å‘Šè¯‰æˆ‘ `.dockerignore` æ–‡ä»¶ä¸­åº”åŒ…å«çš„å†…å®¹ã€‚
>
> **æŠ€æœ¯æ ˆ:**
> `[è¯·å†™ä¸‹ä½¿ç”¨è¯­è¨€åŠç‰ˆæœ¬ã€æ¡†æ¶ã€æ‰€éœ€ DB ç­‰ã€‚ä¾‹: Node.js 18, NestJS, PostgreSQL, Redis]`
>
> **çº¦æŸäº‹é¡¹ (Constraints):**
>
> - è€ƒè™‘åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œè¯·æœ€å°åŒ–é•œåƒå¤§å° (ä¾‹: ä½¿ç”¨ Alpine Linux)ã€‚
> - ä¸ºäº†å®‰å…¨ï¼Œè¯·è®¾ç½®ä¸ºä»¥æ™®é€šç”¨æˆ·è€Œé root æƒé™è¿è¡Œã€‚

---

## ğŸ§¬ æç¤ºè¯è§£å‰– (Why it works?)

---

## ğŸ“Š è¯æ˜: Before & After

### âŒ Before (è¾“å…¥æ ˆ)

â€œç”¨ Python 3.9, Django, PostgreSQLã€‚â€

### âœ… After (ç»“æœ - Dockerfile éƒ¨åˆ†)

```dockerfile
# 1. Build Stage
FROM python:3.9-slim as builder
WORKDIR /app
COPY requirements.txt .
RUN pip install --user -r requirements.txt

# 2. Production Stage
FROM python:3.9-slim
WORKDIR /app
# åªå¤åˆ¶æ„å»ºé˜¶æ®µå®‰è£…çš„åŒ…
COPY --from=builder /root/.local /root/.local
COPY . .

# ç¯å¢ƒå˜é‡è®¾ç½®
ENV PATH=/root/.local/bin:$PATH
# ä¸ºäº†å®‰å…¨ç”Ÿæˆå¹¶åˆ‡æ¢ non-root ç”¨æˆ·
RUN useradd -m myuser
USER myuser

CMD ["gunicorn", "config.wsgi:application", "--bind", "0.0.0.0:8000"]
```

_ç‰¹å¾: ä½¿ç”¨ slim é•œåƒ, å¤šé˜¶æ®µæ„å»º, non-root ç”¨æˆ·è¿è¡Œã€‚_

---

## ğŸ¯ ç»“è®º

â€œåœ¨æˆ‘çš„ç”µè„‘ä¸Šæ˜æ˜å¯ä»¥...â€å·²ç»æ˜¯è¿‡å»å¼äº†ã€‚
è£…è¿›åä¸º Docker çš„å®¹å™¨ï¼Œè®©å®ƒåœ¨ä»»ä½•åœ°æ–¹éƒ½ä¸€æ ·è¿è¡Œå§ã€‚AI ä¼šä¼ æˆç»™ä½ é‚£ä¸ªåŒ…è£…æŠ€æœ¯ï¼ğŸ·
