---
interface Props {
  slotId: string;
  format?: "auto" | "fluid" | "rectangle";
  responsive?: boolean;
  className?: string;
}

const {
  slotId,
  format = "auto",
  responsive = true,
  className = "",
} = Astro.props;
const PUBLISHER_ID = "ca-pub-3431175239292021";
const isDev = import.meta.env.DEV;
---

<div
  class:list={[
    "ad-container flex flex-col items-center justify-center overflow-hidden my-10",
    className,
  ]}
>
  <span class="ad-label">ADVERTISEMENT</span>
  {
    isDev ? (
      /* 개발 환경용 플레이스홀더 */
      <div class="w-full h-32 bg-gray-100 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-700 flex flex-col items-center justify-center text-gray-400 rounded-lg">
        <span class="font-bold">Google AdSense</span>
        <span class="text-xs">
          Slot: {slotId} ({format})
        </span>
      </div>
    ) : (
      /* 실제 광고 코드 */
      <>
        <ins
          class="adsbygoogle"
          style="display:block; width: 100%;"
          data-ad-client={PUBLISHER_ID}
          data-ad-slot={slotId}
          data-ad-format={format}
          data-full-width-responsive={responsive}
        />
        <script is:inline>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </>
    )
  }
</div>

<style>
  .ad-container {
    min-height: 280px; /* 권장 최소 높이 (직사각형 광고 기준) */
    background: rgba(255, 255, 255, 0.02); /* 미세한 배경 */
    border-radius: 8px;
  }

  .ad-label {
    font-size: 0.6rem;
    color: #555;
    margin-bottom: 8px;
    letter-spacing: 1px;
    font-family: sans-serif;
    align-self: flex-start; /* 좌측 정렬 */
    width: 100%;
    text-align: center; /* 라벨 중앙 정렬 */
  }
</style>
