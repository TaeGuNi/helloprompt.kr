---
layout: /src/layouts/Layout.astro
title: "私のコードがゴミだって！？クリーンコード・リファクタリング・コーチ"
author: "Zzabbis"
date: "2026-02-07T09:10:33.120Z"
updatedDate: "2026-02-07T09:10:33.120Z"
category: "コーディング/IT"
description: "動くだけの汚いコードを、「読みやすく、保守しやすい」きれいなコードにアップグレードしてくれるプロンプトです。"
tags: ["リファクタリング", "クリーンコード", "開発者", "コードレビュー"]
---

# 📝 私のコードがゴミだって！？クリーンコード・リファクタリング・コーチ

- **🎯 推奨対象:** 誰でも
- **⏱️ 所要時間:** 5分
- **🤖 推奨モデル:** 全てのAIモデル

- **📊 難易度:** ⭐⭐☆☆☆
- **⚡️ 有効性:** ⭐⭐⭐⭐⭐
- **🛠️ 活用度:** ⭐⭐⭐⭐☆

_「後で直そう」と思って1年が過ぎました。もう触るのが怖いです。_

スパゲッティコード（絡み合ったコード）は開発者の敵です。可読性が低いとバグを見つけるのも難しく、機能を追加するのも困難です。このプロンプトは、ロバート・C・マーティン（クリーンコードの著者）が憑依して、あなたのコードを洗い清め、ピカピカにしてくれます。

---

## ⚡️ 3行要約 (TL;DR)

1. 重複コードの削除および関数の分離 (Extract Method)
2. 意味が不明確な変数/関数名の改善 (Naming Convention)
3. パフォーマンスの最適化および最新構文 (Modern Syntax) の適用

---

## 🚀 解決策: 「クリーンコード・ランドリー」

### 🥉 Basic Version (基本型)

手っ取り早く結果だけが必要な時に使用してください。

> **役割:** あなたは `[クリーンコードの伝道師でありチーフアーキテクト]` だ。
> **リクエスト:** 動くだけの汚いコードを、「読みやすく、保守しやすい」きれいなコードにアップグレードしてほしい。

<br>

### 🥇 Pro Version (専門家型)

ディテールにこだわったクオリティが必要な時に使用してください。

以下の **PROMPT** の内容をコピーして使用してください。

> **役割 (Role):** あなたは `[クリーンコードの伝道師でありチーフアーキテクト]` だ。
>
> **状況 (Context):** 私のコードは機能はするが、汚くて読みづらい (Dirty Code)。保守しやすいようにリファクタリングしてほしい。
>
> **リクエスト (Task):**
>
> 1. **[ネーミングセンス]**: 変数名と関数名を直感的で意味のあるものに変えてほしい。(例: `a` -> `userAge`)
> 2. **[構造改善]**: 長すぎる関数は役割ごとに分割し、重複するロジックは一つにまとめてほしい。
> 3. **[Modernize]**: 可能であれば最新の言語構文 (ES6+, Python 3.10+ など) を適用してほしい。
> 4. **[Before & After]**: どこがどう変わったのか比較し、なぜそのように変えたのか理由を説明してほしい。
>
> **制約事項 (Constraints):**
>
> - コードの動作（機能）は絶対に変えてはいけない。
> - コメント (Comment) は本当に必要な場所にだけつけてほしい。(コードで説明できるならコメントは削除)
>
> **対象コード:**

> [ここに汚い（？）コードを貼り付けてください]

---

## 🧬 プロンプト解剖 (Why it works?)

このプロンプトは、明確なペルソナ設定と具体的な指示事項 (Task) を組み合わせることで、AIが意図を正確に把握するように設計されています。段階的な思考 (Chain of Thought) を誘導し、論理的な回答を得ることができます。

---

## 📊 証明: Before & After

単純な命令と最適化されたプロンプトの違いは明らかです。提供されたプロンプトを使用すると、より具体的で構造化された回答が得られ、再修正 (Re-prompting) にかかる時間を節約できます。

### ❌ Before (入力)

```python
def calc(x, y):
    if x > 19:
        print("성인")
        p = y * 0.9
        return p
    else:
        print("학생")
        return y
```

(関数名 `calc` は何を計算するのか分からず、`p` も意味不明)

### ✅ After (プロンプト結果)

```python
def calculate_discounted_price(age, price):
    ADULT_AGE_THRESHOLD = 20
    DISCOUNT_RATE = 0.9

    if age >= ADULT_AGE_THRESHOLD:
        print("성인입니다.")
        return price * DISCOUNT_RATE

    print("학생입니다.")
    return price
```

**[改善ポイント]**

1. **関数名の変更**: `calc` -> `calculate_discounted_price` (割引価格の計算であることが明確になる)
2. **マジックナンバーの削除**: `19`, `0.9` のような数字を定数として宣言し、意味を付与。
3. **不要なelseの削除**: Early Return パターンを使用してインデントの深さを減らす。

---

## 💡 作成者コメント (Insight)

このプロンプトは、実務ですぐに活用できる実用性に重点を置きました。
結果に満足できない場合は、入力変数や状況 (Context) をもう少し具体的に設定してみてください。

---

## 🙋 よくある質問 (FAQ)

**Q. 結果が気に入りません。**
A. 具体的な例を追加したり、状況 (Context) をより詳しく描写してみてください。

**Q. 他の言語でも可能ですか？**
A. はい、プロンプトの指示事項をその言語に翻訳すれば可能です。

---

## 🎯 結論

良いコードは、よく書かれたエッセイのようにすらすら読めます。未来の自分（そして同僚）のためにコードを掃除しましょう。

さあ、定時退社してシャワーを浴びてください。コードじゃなくて体をね。 🍷