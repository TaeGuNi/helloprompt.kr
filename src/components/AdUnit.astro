---
interface Props {
  slotId: string;
  format?: "auto" | "fluid" | "rectangle";
  responsive?: boolean;
  label?: string;
  className?: string;
}

const {
  slotId,
  format = "auto",
  responsive = true,
  label = "ADVERTISEMENT",
  className = "",
} = Astro.props;

const isDev = import.meta.env.DEV;
const pubId = "ca-pub-3431175239292021";
---

<div class={`ad-unit-wrapper my-8 flex flex-col items-center ${className}`}>
  {
    label && (
      <div class="ad-label text-[10px] uppercase tracking-widest text-gray-400/80 mb-2 select-none">
        {label}
      </div>
    )
  }

  <div
    class="ad-slot-container w-full min-h-[280px] bg-white/5 rounded-lg overflow-hidden relative flex items-center justify-center border border-white/5 shadow-sm"
  >
    {
      isDev ? (
        <div class="flex flex-col items-center justify-center p-6 text-gray-500 w-full h-full bg-stripes">
          <span class="font-bold text-sm mb-1">AdSense Unit</span>
          <code class="text-xs bg-black/20 px-2 py-1 rounded text-blue-300">
            {slotId}
          </code>
          <span class="text-[10px] mt-2 opacity-60">format: {format}</span>
        </div>
      ) : (
        <>
          <ins
            class="adsbygoogle"
            style="display:block"
            data-ad-client={pubId}
            data-ad-slot={slotId}
            data-ad-format={format}
            data-full-width-responsive={responsive ? "true" : "false"}
          />
          <script is:inline>
            (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </>
      )
    }
  </div>
</div>

<style>
  .bg-stripes {
    background-image: linear-gradient(
      45deg,
      rgba(0, 0, 0, 0.05) 25%,
      transparent 25%,
      transparent 50%,
      rgba(0, 0, 0, 0.05) 50%,
      rgba(0, 0, 0, 0.05) 75%,
      transparent 75%,
      transparent
    );
    background-size: 20px 20px;
  }
</style>
