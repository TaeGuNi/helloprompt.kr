---
layout: /src/layouts/Layout.astro
title: "像米其林意面一样重构意大利面代码"
author: "Zzabbis"
date: "2026-02-04"
updatedDate: "2026-02-04"
category: "开发"
description: "将难以阅读的遗留代码重构为整洁高效的代码并添加注释的提示词。"
tags: ["重构", "整洁代码", "维护"]
---

# 📝 像米其林意面一样重构意大利面代码

> **🎯 推荐对象:** 所有人
> **⏱️ 所需时间:** 5分钟
> **🤖 推荐模型:** 所有AI模型

|  难度   |   有效性   |  实用性   |
| :-----: | :--------: | :-------: |
| ⭐⭐☆☆☆ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐☆ |

_"虽然是我写的代码，但3个月后再看感觉像是别人写的？变量名是a, b, c，for循环3层嵌套... 需要救援者。"_

处理遗留代码就像拆弹工作。感觉一碰就会炸，很害怕。请利用AI在维持代码逻辑的同时，进行提高可读性和效率的重构。

---

## ⚡️ 3行摘要 (TL;DR)

1. 可读性差的意大利面代码是维护的敌人。
2. 给AI赋予'整洁代码精炼者'的角色，同时改善可读性和性能。
3. 通过代码变更理由和亲切的注释，变为组员们也容易理解的代码。

---

## 🚀 解决方案: "整洁代码精炼者(Refiner)"

### 🥉 Basic Version (基础版)

当只需要快速获得结果时使用。

> **角色:** 你是`[Clean Code作者级开发者]`。
> **请求:** 请提供将难以阅读的遗留代码重构为整洁高效的代码并添加注释的提示词。

<br>

### 🥇 Pro Version (专家版)

当需要细节质量时使用。

请复制下方 **PROMPT** 内容并粘贴给ChatGPT或Claude。

> **角色:** 你是`[Clean Code作者级开发者]`。
>
> **情况:** 有功能正常但可读性差且低效的`[语言名称]`代码。
>
> **请求:**
>
> 1. 请从'可读性'和'性能'的角度重构此代码。
> 2. 请将变量名和函数名更改为直观的命名。
> 3. 请解释变更部分为什么更好。
> 4. 请在代码的各主要逻辑上添加亲切的注释(Comment)。
>
> **代码:**
> `[在此粘贴要重构的代码]`

---

## 🧬 提示词解剖 (Why it works?)

---

## 📊 证明: Before & After

### ❌ Before (输入: Python 示例)

```python
def c(l):
    r = 0
    for i in l:
        if i % 2 == 0:
            r += i
    return r
```

<br>

### ✅ After (结果)

```python
def calculate_even_sum(numbers: list[int]) -> int:
    """
    在给定的数字列表中计算偶数之和并返回。
    """
    # 仅过滤偶数求和 (使用List Comprehension提高性能及可读性)
    return sum(num for num in numbers if num % 2 == 0)

# 💡 变更理由:
# 1. 命名: 函数名 c -> calculate_even_sum, 变量名 l -> numbers, r -> sum 变更以明确意图。
# 2. 逻辑简化: 用sum()和generator expression代替for循环和if语句，变更为Pythonic的代码。
# 3. 添加类型提示: 明确输入和输出类型以确保稳定性。
```

---

## 🎯 结论

好的代码不是计算机能理解的代码，而是'人'能理解的代码。请和AI一起提升代码的品格。
