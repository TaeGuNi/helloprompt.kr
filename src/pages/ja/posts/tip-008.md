---
layout: /src/layouts/Layout.astro
title: "スパゲッティコード、ミシュランのパスタへリファクタリングする"
author: "Zzabbis"
date: "2026-02-04"
updatedDate: "2026-02-04"
category: "開発"
description: "読みにくいレガシーコードをすっきりと効率的なコードにリファクタリングし、コメントまで付けてくれるプロンプトです。"
tags: ["リファクタリング", "クリーンコード", "保守"]
lang: ja
---

# 📝 スパゲッティコード、ミシュランのパスタへリファクタリングする

> **🎯 推奨対象:** 誰でも
> **⏱️ 所要時間:** 5分
> **🤖 推奨モデル:** すべてのAIモデル

| 難易度  |    効果    |  活用度   |
| :-----: | :--------: | :-------: |
| ⭐⭐☆☆☆ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐☆ |

_"自分が書いたコードだけど3ヶ月後に見たら他人が書いたみたいだとしたら？変数名はa, b, cでfor文は3重ネスト... 救世主が必要です。"_

レガシーコードを扱うのは爆弾処理作業に似ています。触ると爆発しそうで怖いですよね。AIを活用してコードのロジックは維持しつつ、可読性と効率性を高めるリファクタリングを進めてみてください。

---

## ⚡️ 3行要約 (TL;DR)

1. 可読性の低いスパゲッティコードは保守の敵です。
2. AIに「クリーンコード・リファイナー」の役割を与えて、可読性と性能を同時に改善しましょう。
3. コード変更の理由と親切なコメントを通じて、チームメンバーも理解しやすいコードに変貌します。

---

## 🚀 解決策: "クリーンコード・リファイナー(Refiner)"

### 🥉 Basic Version (基本型)

素早く結果だけが必要な場合に使用してください。

> **役割:** あなたは`[Clean Code著者級の開発者]`です。
> **依頼:** 読みにくいレガシーコードをすっきりと効率的なコードにリファクタリングし、コメントまで付けてくれるプロンプトを作成してください。

<br>

### 🥇 Pro Version (専門家型)

詳細なクオリティが必要な場合に使用してください。

以下の**PROMPT**の内容をコピーして、ChatGPTやClaudeに貼り付けてください。

> **役割:** あなたは`[Clean Code著者級の開発者]`です。
>
> **状況:** 機能は動くけれど可読性が低く非効率的な`[言語名]`のコードがあります。
>
> **依頼:**
>
> 1. このコードを「可読性」と「性能」の観点からリファクタリングしてください。
> 2. 変数名と関数名を直感的なネーミングに変更してください。
> 3. 変更された部分がなぜより良いのか理由を説明してください。
> 4. コードの各主要ロジックに親切なコメント(Comment)を付けてください。
>
> **コード:**
> `[ここにリファクタリングするコードを貼り付けてください]`

---

## 🧬 プロンプト解剖 (Why it works?)

---

## 📊 証明: Before & After

### ❌ Before (入力: Python 例)

```python
def c(l):
    r = 0
    for i in l:
        if i % 2 == 0:
            r += i
    return r
```

<br>

### ✅ After (結果)

```python
def calculate_even_sum(numbers: list[int]) -> int:
    """
    与えられた数値リストから偶数の合計を計算して返します。
    """
    # 偶数だけフィルタリングして合計を求める (List Comprehensionの使用で性能および可読性向上)
    return sum(num for num in numbers if num % 2 == 0)

# 💡 変更理由:
# 1. ネーミング: 関数名 c -> calculate_even_sum, 変数名 l -> numbers, r -> sum に変更して意図を明確化。
# 2. ロジック単純化: for文とif文をsum()とgenerator expressionに置き換えてPythonらしい(Pythonic)コードに変更。
# 3. 型ヒント追加: 入力と出力タイプを明示して安定性確保。
```

---

## 🎯 結論

良いコードはコンピュータが理解するコードではなく、「人」が理解するコードです。AIと共にコードの品格を高めましょう。
