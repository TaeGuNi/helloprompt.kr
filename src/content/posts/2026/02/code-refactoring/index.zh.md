---
layout: /src/layouts/Layout.astro
title: "我的代码是垃圾？！整洁代码重构教练"
author: "Zzabbis"
date: "2026-02-07T09:10:33.120Z"
updatedDate: "2026-02-07T09:10:33.120Z"
category: "编码/IT"
description: "这是一个将勉强能运行的凌乱代码，重构为‘易读、易维护’的整洁代码（Clean Code）的专属提示词。"
tags: ["重构", "整洁代码", "开发者", "代码审查"]
---

# 📝 我的代码是垃圾？！整洁代码重构教练

- **🎯 推荐受众:** 开发者、初中级程序员、代码审查员
- **⏱️ 所需时间:** 5分钟 → 缩短至 1分钟
- **🤖 推荐模型:** 所有对话型 AI (ChatGPT, Claude, Gemini 等)

- ⭐ **难度:** ⭐⭐☆☆☆
- ⚡️ **有效性:** ⭐⭐⭐⭐⭐
- 🚀 **实用性:** ⭐⭐⭐⭐☆

> _“先让它跑起来，以后再重构。”——这句话说出口后，那段代码就成了一座没人敢碰的遗迹。_

意大利面条式的代码（Spaghetti Code）是所有开发者的噩梦。代码可读性差，不仅会导致 Bug 难以排查，还会让新功能的开发举步维艰。这个提示词将让罗伯特·C·马丁（《整洁代码》作者）“附体”，帮你洗净那些惨不忍睹的逻辑，让你的代码焕然一新，重新变得清爽易读。

---

## ⚡️ 3句话总结 (TL;DR)

1. **消除重复与函数拆分 (Extract Method):** 将臃肿的逻辑拆分为单一职责的函数。
2. **重塑命名规范 (Naming Convention):** 告别含义不明的 `a`, `b`, `calc`，换上直观且表意的变量和函数名。
3. **现代化语法升级 (Modern Syntax):** 自动应用最新的语言特性，提升代码的执行效率与优雅度。

---

## 🚀 解决方案："整洁代码重构教练"

### 🥉 Basic Version (基础版)

当你时间紧迫，只需要快速拿到重构结果时使用。

> **角色:** 你是 `[整洁代码布道者兼首席架构师]`。
> **请求:** 请把以下仅能勉强运行的凌乱代码，重构为“易读且易于维护”的整洁代码，并解释修改原因。

<br>

### 🥇 Pro Version (专家版)

当你需要深入理解重构细节、提升代码整体质量时使用。

> **角色 (Role):** 你是一位精通《整洁代码 (Clean Code)》的资深布道者兼首席架构师。
>
> **情况 (Context):**
>
> - 背景：我的代码虽然目前能够运行，但由于历史原因非常凌乱（Dirty Code），难以阅读和扩展。
> - 目标：请帮我对其进行深度重构，使其具备极高的可维护性与可读性。
>
> **请求 (Task):**
>
> 1. **[命名优化]**: 将所有变量名和函数名重构为直观、表意且符合规范的名称（例如：将 `a` 改为 `userAge`）。
> 2. **[结构重组]**: 将过于庞大、承担多重职责的函数按功能拆分（单一职责原则），并提取、合并重复的逻辑。
> 3. **[现代化改造]**: 在确保兼容性的前提下，尽可能应用该语言最新的语法特性（如 ES6+、Python 3.10+ 等）。
> 4. **[修改对比]**: 请详细列出修改前后的差异（Before & After），并逐条解释为什么要这样修改，以及这种修改带来了什么好处。
>
> **约束事项 (Constraints):**
>
> - **绝对原则：** 重构后的代码行为（核心功能）必须与原代码保持 100% 一致。
> - **注释精简：** 仅在处理极其复杂的业务逻辑时添加必要注释。如果代码本身已经足够清晰（Self-documenting），请删除多余的废话注释。
>
> **目标代码:**
>
> `[请在此处粘贴你需要重构的“意大利面条”代码]`

---

## 💡 作者评论 (Insight)

这个提示词之所以在实际开发中极其强大，是因为它不仅仅是在“美化代码”，而是在**重塑代码的骨架**。在日常工作中，我们往往因为排期紧迫而妥协写出“临时代码”。当你准备提交 Pull Request (PR) 之前，把代码扔给这个“架构师”看一眼。它不仅能帮你省去被 Senior 程序员 Review 时挨骂的环节，还能通过它给出的“修改解释”，让你在不知不觉中学习到顶尖的代码规范和重构思路。你可以把它当作你免费的私人 Code Reviewer。

---

## 🙋 常见问题 (FAQ)

- **Q: 它可以处理公司内部的复杂业务逻辑吗？**
  - A: 可以。但为了防止 AI 产生“幻觉（Hallucination）”或误改业务逻辑，建议你在提示词的“情况 (Context)”中，简要补充该段代码的核心业务目的（例如：“这段代码用于计算电商平台 VIP 用户的折后价”）。

- **Q: 会不会有泄露公司机密代码的风险？**
  - A: 如果代码中包含敏感数据、API Key 或核心商业机密，**千万不要直接放入公共 AI 模型中**。建议在重构前，将敏感变量名替换为 `dummy_data`，或者使用企业级私有化部署的大模型。

---

## 🧬 提示词剖析 (Why it works?)

1. **Role（角色赋予）:** 明确指定为“首席架构师”和“整洁代码布道者”，让 AI 调用其训练数据中关于软件工程最佳实践（如 SOLID 原则）的知识库。
2. **Constraints（约束条件）:** 严格限制“行为绝对不能改变”和“删除废话注释”，有效防止 AI 随意发挥或生成冗长的无用文本。
3. **Task（任务拆解）:** 将重构拆分为“命名、结构、语法、解释”四个维度，确保输出的结果既有实操性，又具备教学价值。

---

## 📊 证明: Before & After

### ❌ Before (输入)

```python
def calc(x, y):
    if x > 19:
        print("성인") # 打印成人
        p = y * 0.9
        return p
    else:
        print("학생") # 打印学生
        return y
```

### ✅ After (结果)

```python
def calculate_discounted_price(age, price):
    ADULT_AGE_THRESHOLD = 20
    DISCOUNT_RATE = 0.9

    if age >= ADULT_AGE_THRESHOLD:
        print("成人")
        return price * DISCOUNT_RATE

    print("学生")
    return price
```

**[修改解析]**

1. **函数与变量重命名**: `calc` -> `calculate_discounted_price`，明确了函数的真实意图。`x`, `y` 替换为 `age`, `price`，一目了然。
2. **消除魔术数字 (Magic Numbers)**: 将 `19` 和 `0.9` 提取为具名常量 `ADULT_AGE_THRESHOLD` 和 `DISCOUNT_RATE`，极大提升了可读性和后期修改的便利性。
3. **结构优化 (Early Return)**: 移除了多余的 `else` 分支，采用“提前返回”模式，减少了代码的缩进层级。

---

## 🎯 结论

优秀的代码就像一篇优美的散文，读起来行云流水。为了未来的自己（以及即将接手你代码的无辜同事），请养成随时清理代码的好习惯。

现在，把重构好的代码提交上去，准时下班去喝杯酒吧。记得，洗的是代码，放松的是你。 🍷
