---

---

<div class="lang-switcher">
  <button class="lang-btn">ğŸŒ Language</button>
  <div class="lang-dropdown">
    <a href="#" data-lang="">ğŸ‡°ğŸ‡· í•œêµ­ì–´</a>
    <a href="#" data-lang="en">ğŸ‡ºğŸ‡¸ English</a>
    <a href="#" data-lang="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</a>
    <a href="#" data-lang="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</a>
    <a href="#" data-lang="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</a>
    <a href="#" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</a>
    <a href="#" data-lang="de">ğŸ‡©ğŸ‡ª Deutsch</a>
    <a href="#" data-lang="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</a>
    <a href="#" data-lang="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</a>
    <a href="#" data-lang="it">ğŸ‡®ğŸ‡¹ Italiano</a>
  </div>
</div>

<style>
  .lang-switcher {
    position: relative;
    display: inline-block;
  }

  .lang-btn {
    background: rgba(10, 20, 30, 0.8);
    color: #fff;
    border: 1px solid #00f3ff;
    padding: 8px 16px;
    font-family: "Orbitron", sans-serif;
    font-size: 0.8rem;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    backdrop-filter: blur(5px);
    width: 140px; /* Fixed width for consistency */
    text-align: center;
  }

  .lang-btn:hover {
    background: rgba(0, 243, 255, 0.1);
    box-shadow: 0 0 10px rgba(0, 243, 255, 0.3);
  }

  .lang-dropdown {
    display: none;
    position: absolute;
    right: 0;
    top: 100%;
    margin-top: 5px;
    background: #0a0f14;
    border: 1px solid #333;
    border-radius: 8px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
    width: 140px; /* Match button width */
    z-index: 2000; /* Increased z-index */
    overflow: hidden;
  }

  .lang-dropdown.show {
    display: block;
    animation: fadeIn 0.2s ease;
  }

  .lang-dropdown a {
    display: block;
    padding: 10px 0; /* Centered padding */
    color: #ccc;
    text-decoration: none;
    font-size: 0.9rem;
    border-bottom: 1px solid #1a1f25;
    transition: background 0.2s;
    text-align: center; /* Center text */
  }

  .lang-dropdown a:last-child {
    border-bottom: none;
  }

  .lang-dropdown a:hover {
    background: rgba(0, 243, 255, 0.1);
    color: #fff;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<script>
  // Script is scoped to this component, but selects globally to ensure
  // it works even if multiple instances (though logic handles one event listener usually).
  // Astro scripts run once per page load.

  function initLanguageSwitcher() {
    const langBtns = document.querySelectorAll(".lang-btn");
    const langLinks = document.querySelectorAll(".lang-dropdown a");

    // Toggle Dropdown
    langBtns.forEach((btn) => {
      // Remove old listeners to avoid duplicates if re-initialized (defensive)
      const newBtn = btn.cloneNode(true) as HTMLElement;
      btn.parentNode?.replaceChild(newBtn, btn);

      newBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        const dropdown = newBtn.nextElementSibling;
        dropdown?.classList.toggle("show");
      });
    });

    // Handle Language Selection
    langLinks.forEach((link) => {
      link.addEventListener("click", (e) => {
        e.preventDefault();
        const targetLang = link.getAttribute("data-lang");
        const currentPath = window.location.pathname;

        const parts = currentPath.split("/").filter(Boolean);
        const knownLangs = [
          "en",
          "es",
          "ja",
          "zh",
          "fr",
          "de",
          "pt",
          "ru",
          "it",
        ];

        let newPath = "/";

        if (parts.length > 0 && knownLangs.includes(parts[0])) {
          parts.shift();
        }

        if (targetLang) {
          parts.unshift(targetLang);
        }

        newPath += parts.join("/");
        window.location.href = newPath;
      });
    });

    // Close Dropdown on outside click
    document.addEventListener("click", () => {
      document
        .querySelectorAll(".lang-dropdown")
        .forEach((d) => d.classList.remove("show"));
    });
  }

  // Run on load
  initLanguageSwitcher();

  // Support View Transitions if added later (optional safety)
  document.addEventListener("astro:page-load", initLanguageSwitcher);
</script>
