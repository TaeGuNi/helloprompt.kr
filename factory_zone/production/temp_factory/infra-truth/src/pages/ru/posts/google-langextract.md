---
layout: ../../../layouts/MarkdownPostLayout.astro
title: "Освоение извлечения структурированных данных с помощью Google LangExtract"
date: 2024-05-20
pubDate: 2024-05-20
description: "Узнайте, как извлекать точный JSON и структурированные данные из LLM с помощью новой библиотеки Google LangExtract."
author: "Hello Prompt"
image:
  url: "https://docs.astro.build/assets/full-logo-light.png"
  alt: "Google LangExtract Logo"
tags: ["Google", "LLM", "Data Extraction", "Python", "AI"]
---

В то время как большие языковые модели (LLM) отлично пишут стихи или генерируют код, они часто испытывают трудности с задачей, наиболее востребованной в бизнес-приложениях: **извлечением структурированных данных**. Получение конкретной информации из текста и её точное преобразование в формат JSON было сложной задачей при использовании только промпт-инжиниринга.

Google недавно представила **LangExtract**, новую библиотеку Python, которая решает эту проблему напрямую. В этой статье мы рассмотрим, что такое LangExtract и как она может революционизировать ваши конвейеры данных.

## Что такое LangExtract?

LangExtract работает на базе моделей Google Gemini и Vertex AI, преобразуя неструктурированные текстовые данные в структурированные объекты (обычно модели Pydantic или Python Dataclasses). Она обеспечивает гораздо более надежную **типобезопасность** и **способность к исправлению ошибок**, чем традиционные парсеры LangChain или простые инструкции в промптах.

### Ключевые особенности

1.  **Извлечение на основе схемы**: Определите модель Pydantic и заставьте LLM генерировать данные, которые точно соответствуют этой схеме.
2.  **Самокоррекция (Self-Correction)**: Если модель выдает неверный формат, библиотека автоматически обнаруживает ошибки парсинга и просит модель исправить себя, получая валидный результат.
3.  **Оптимизация для Gemini**: Она использует возможности вызова функций новейших моделей Google Gemini Pro и Flash для быстрого и экономичного выполнения задач извлечения.

## Пример использования

Рассмотрим пример извлечения информации о встрече из простого тела электронного письма.

```python
from google.langextract import DataExtractor
from pydantic import BaseModel, Field
from datetime import datetime

# 1. Определение схемы для извлечения данных
class MeetingInfo(BaseModel):
    topic: str = Field(description="Тема встречи")
    participants: list[str] = Field(description="Список имен участников")
    start_time: datetime = Field(description="Время начала встречи")
    location: str | None = Field(description="Место встречи (null, если нет)")

# 2. Инициализация экстрактора (с использованием модели Gemini)
extractor = DataExtractor(model="gemini-1.5-flash")

email_content = """
Мы запланировали встречу 'Маркетинговая стратегия Q3' на следующий вторник в 14:00.
Участники: Иван, Мария и Петр.
Место: Конференц-зал 301. Не опаздывайте!
"""

# 3. Выполнение извлечения данных
meeting = extractor.extract(MeetingInfo, email_content)

print(meeting)
# Вывод:
# topic='Маркетинговая стратегия Q3'
# participants=['Иван', 'Мария', 'Петр']
# start_time=datetime(2024, 5, 21, 14, 0)
# location='Конференц-зал 301'
```

## Почему LangExtract?

Раньше вам приходилось использовать регулярные выражения (Regex) или писать сложные промпты, но с LangExtract вы можете строить конвейеры данных, используя подход **code-first**. Это особенно полезно для извлечения ключевых аргументов, необходимых для ответов из найденных документов в системах RAG (Retrieval-Augmented Generation), или структурирования информации о заказах в чат-ботах поддержки клиентов для передачи в API.

## Заключение

Google LangExtract превращает LLM из простых чат-ботов в **надежные движки обработки данных**. Установите её сегодня и внедрите в свои проекты. Сложности предварительной обработки данных будут значительно снижены.
