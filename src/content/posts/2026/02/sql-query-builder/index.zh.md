---
layout: /src/layouts/Layout.astro
title: "ë³µì¡í•œ SQL ì¿¼ë¦¬, ë§ë¡œ í•˜ë©´ ì½”ë“œë¡œ ì§œì¤ë‹ˆë‹¤"
author: "ZZabbis"
date: "2026-02-12"
updatedDate: "2026-02-12"
category: "ë°ì´í„°"
description: "JOIN, GROUP BY, Window Function... í—·ê°ˆë¦¬ëŠ” SQL ë¬¸ë²•, ì´ì œ ê²€ìƒ‰í•˜ì§€ ë§ˆì„¸ìš”."
tags: ["SQL", "ë°ì´í„°ë¶„ì„", "ì¿¼ë¦¬"]
---

# ğŸ“ å¤æ‚SQLæŸ¥è¯¢ï¼Œä¸€å¥è¯è‡ªåŠ¨ç”Ÿæˆä»£ç 

- **ğŸ¯ æ¨èå¯¹è±¡ï¼š** æ•°æ®åˆ†æå¸ˆã€åç«¯å¼€å‘è€…ã€äº§å“ç»ç†ã€åˆçº§å‘˜å·¥
- **â±ï¸ é¢„è®¡è€—æ—¶ï¼š** 30åˆ†é’Ÿ â†’ 1åˆ†é’Ÿ
- **ğŸ¤– æ¨èæ¨¡å‹ï¼š** ChatGPT (GPT-4), Claude 3.5 Sonnet, Gemini Advanced

- â­ **éš¾åº¦ï¼š** â­â­â˜†â˜†â˜†
- âš¡ï¸ **æ•ˆæœï¼š** â­â­â­â­â­
- ğŸš€ **å®ç”¨åº¦ï¼š** â­â­â­â­â˜†

> _"è¿˜åœ¨ä¸ºäº†ä¸€ä¸ªåµŒå¥—æŸ¥è¯¢ï¼ˆSubqueryï¼‰æˆ–è€…çª—å£å‡½æ•°ï¼ˆWindow Functionï¼‰åœ¨ Stack Overflow ä¸Šç¿»æ‰¾åŠå¤©å—ï¼Ÿè®© AI æ¥åšä½ çš„ä¸“å± DBA å§ï¼"_

å¯¹äºæ•°æ®åˆ†æå¸ˆæˆ–æ˜¯éœ€è¦ç»å¸¸æ‹‰å–æ•°æ®çš„ä¸šåŠ¡äººå‘˜æ¥è¯´ï¼Œç¼–å†™å¤æ‚ SQL å¾€å¾€æ˜¯æœ€è€—æ—¶ä¸”å®¹æ˜“å‡ºé”™çš„ç¯èŠ‚ã€‚å…¶å®ï¼Œä½ æ ¹æœ¬ä¸éœ€è¦æ­»è®°ç¡¬èƒŒé‚£äº›å¤æ‚çš„ SQL è¯­æ³•ã€‚åªè¦æŒæ¡æ­£ç¡®çš„æç¤ºè¯ç»“æ„ï¼ŒAI å°±èƒ½åœ¨å‡ ç§’é’Ÿå†…ä¸ºä½ ç”Ÿæˆç²¾å‡†ã€é«˜æ•ˆä¸”å¯ä»¥ç›´æ¥è¿è¡Œçš„ä»£ç ã€‚

---

## âš¡ï¸ 3å¥è¯æ€»ç»“ (TL;DR)

1. å‘Šåˆ«å¤æ‚çš„ SQL è¯­æ³•è®°å¿†ï¼Œåªéœ€ç”¨è‡ªç„¶è¯­è¨€æè¿°ä½ çš„æ•°æ®éœ€æ±‚ã€‚
2. æ— è®ºæ˜¯å¤šè¡¨ JOIN è¿˜æ˜¯å¤æ‚çš„èšåˆè®¡ç®—ï¼ŒAI éƒ½èƒ½ç¬é—´ç”Ÿæˆç²¾å‡†çš„ä»£ç ç»“æ„ã€‚
3. åªè¦é™„å¸¦è¡¨ç»“æ„ï¼ˆSchemaï¼‰ä¸€èµ·æä¾›ç»™ AIï¼Œç”Ÿæˆçš„ SQL å‡†ç¡®ç‡å¯é«˜è¾¾ 99%ã€‚

---

## ğŸš€ è§£å†³æ–¹æ¡ˆï¼š"AI ä¸“å± SQL ç¼–å†™ä¸“å®¶"

### ğŸ¥‰ Basic Version (åŸºç¡€ç‰ˆ)

åªéœ€å¿«é€Ÿè·å–åŸºç¡€æŸ¥è¯¢è¯­å¥æˆ–ç®€å•çš„è¡¨å…³è”æ—¶ä½¿ç”¨ã€‚

> **è§’è‰²ï¼š** ä½ æ˜¯ä¸€ä½èµ„æ·±çš„æ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰ã€‚
> **è¦æ±‚ï¼š** è¯·å¸®æˆ‘å†™ä¸€æ®µ SQL æŸ¥è¯¢ã€‚
> **éœ€æ±‚ï¼š** `[åœ¨è¿™é‡Œç”¨å¤§ç™½è¯æè¿°ä½ æƒ³æŸ¥è¯¢çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼šå¸®æˆ‘æŸ¥å‡ºä¸Šä¸ªæœˆé”€å”®é¢æœ€é«˜çš„å‰10åå®¢æˆ·]`
> **æ•°æ®åº“ç±»å‹ï¼š** `[MySQL / PostgreSQL / BigQuery ç­‰]`

<br>

### ğŸ¥‡ Pro Version (ä¸“å®¶ç‰ˆ)

é€‚ç”¨äºåŒ…å«å¤šè¡¨å…³è”ã€å¤æ‚è¿‡æ»¤æ¡ä»¶å’Œé«˜çº§çª—å£å‡½æ•°çš„é«˜é˜¶æŠ¥è¡¨åœºæ™¯ã€‚

> **è§’è‰² (Role)ï¼š** ä½ æ˜¯ä¸€ä½æ‹¥æœ‰ 10 å¹´ä»¥ä¸Šç»éªŒçš„é«˜çº§æ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰å’Œæ•°æ®æ¶æ„å¸ˆã€‚
>
> **èƒŒæ™¯ (Context)ï¼š**
>
> - å½“å‰æƒ…å†µï¼šæˆ‘éœ€è¦ä»å…¬å¸çš„ä¸šåŠ¡æ•°æ®åº“ä¸­æå–ç²¾ç¡®çš„æ•°æ®æŠ¥è¡¨ï¼Œä½†æˆ‘å¯¹å¤æ‚çš„ SQL è¯­æ³•ä¸å¤Ÿç†Ÿç»ƒã€‚
> - ç›®æ ‡ï¼šæ ¹æ®æˆ‘æä¾›çš„è‡ªç„¶è¯­è¨€éœ€æ±‚å’Œè¡¨ç»“æ„ï¼Œç¼–å†™å‡ºæœ€é«˜æ•ˆã€å‡†ç¡®ä¸”æ˜“è¯»çš„ SQL è¯­å¥ã€‚
>
> **ä»»åŠ¡ (Task)ï¼š**
>
> 1. è¯·ä»”ç»†é˜…è¯»æˆ‘æä¾›çš„ `[è¡¨ç»“æ„/Schema]` å’Œ `[æŸ¥è¯¢éœ€æ±‚]`ã€‚
> 2. ç”Ÿæˆèƒ½å¤Ÿå®Œç¾æ»¡è¶³éœ€æ±‚çš„ SQL è¯­å¥ã€‚
> 3. åœ¨ SQL ä»£ç ä¸­ï¼Œå…³é”®é€»è¾‘å’Œå¤æ‚çš„ JOIN/èšåˆéƒ¨åˆ†å¿…é¡»åŠ ä¸Šæ¸…æ™°çš„ä¸­æ–‡æ³¨é‡Šã€‚
> 4. ç®€è¦è¯´æ˜è¿™æ®µ SQL çš„æ‰§è¡Œé€»è¾‘ï¼Œä»¥åŠå¯èƒ½çš„æ€§èƒ½ä¼˜åŒ–å»ºè®®ã€‚
>
> **è¾“å…¥å˜é‡ï¼š**
>
> - **[æŸ¥è¯¢éœ€æ±‚]ï¼š** `[åœ¨æ­¤è¾“å…¥ä½ çš„å…·ä½“éœ€æ±‚ï¼Œä¾‹å¦‚ï¼šç»Ÿè®¡2026å¹´ç¬¬ä¸€å­£åº¦ï¼Œæ¯ä¸ªéƒ¨é—¨ä¸­ç»©æ•ˆæ’åå‰3çš„å‘˜å·¥å§“ååŠé”€å”®æ€»é¢]`
> - **[è¡¨ç»“æ„/Schema]ï¼š**
>   `[åœ¨æ­¤ç²˜è´´ç›¸å…³çš„å»ºè¡¨è¯­å¥ï¼Œæˆ–ç®€å•çš„å­—æ®µæè¿°ã€‚ä¾‹å¦‚ï¼š`
>   `è¡¨ employees: id, name, department_id, performance_score`
>   `è¡¨ sales: id, employee_id, amount, sale_date]`
> - **[æ•°æ®åº“ç±»å‹]ï¼š** `[ä¾‹å¦‚ï¼šPostgreSQL 15]`
>
> **çº¦æŸæ¡ä»¶ (Constraints)ï¼š**
>
> - å¿…é¡»ä½¿ç”¨ `[æ•°æ®åº“ç±»å‹]` æ”¯æŒçš„æ ‡å‡†è¯­æ³•ã€‚
> - ä¼˜å…ˆä½¿ç”¨ JOIN è€Œä¸æ˜¯ä½æ•ˆçš„å­æŸ¥è¯¢ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ã€‚
> - ä»£ç è¾“å‡ºæ ¼å¼å¿…é¡»ä¸¥æ ¼ä½¿ç”¨ Markdown ä»£ç å—ã€‚
>
> **æ³¨æ„äº‹é¡¹ (Warning)ï¼š**
>
> - å¦‚æœæˆ‘æä¾›çš„è¡¨ç»“æ„ç¼ºå¤±äº†å¿…è¦çš„å­—æ®µï¼ˆä¾‹å¦‚éœ€æ±‚ä¸­æåˆ°äº†æŸä¸ªç­›é€‰æ¡ä»¶ï¼Œä½† Schema ä¸­å¹¶æ²¡æœ‰å¯¹åº”å­—æ®µï¼‰ï¼Œè¯·ç«‹åˆ»å‘æˆ‘æŒ‡å‡ºæ¥ï¼Œç»å¯¹ä¸èƒ½è‡ªå·±çç¼–å­—æ®µåç§°ã€‚ï¼ˆé˜²æ­¢å¹»è§‰ï¼‰

---

## ğŸ’¡ ä½œè€…è§è§£ (Insight)

ç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤šè¡¨ `LEFT JOIN` æˆ–è€… `ROW_NUMBER() OVER()` è¿™ç±»çª—å£å‡½æ•°æ—¶ï¼Œç¨æœ‰ä¸æ…å°±ä¼šå¯¼è‡´æ•°æ®ç¿»å€æˆ–æ¼ç®—ã€‚

è¿™ä¸ªæç¤ºè¯ä¹‹æ‰€ä»¥èƒ½åœ¨å®æˆ˜ä¸­å‘æŒ¥å·¨å¤§å¨åŠ›ï¼Œæ ¸å¿ƒåœ¨äºå®ƒ**å¼ºåˆ¶è¦æ±‚äº†æä¾›è¡¨ç»“æ„ï¼ˆSchemaï¼‰å¹¶ä¸¥æ ¼é™åˆ¶äº† AI çš„å¹»è§‰**ã€‚ä»¥å‰æˆ‘ä»¬æ€»æ˜¯æŠ±æ€¨ AI å†™çš„ SQL è·‘ä¸é€šï¼Œå¤§å¤šæ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æŠŠæ•°æ®åº“é‡Œåˆ°åº•æœ‰å“ªäº›è¡¨å’Œå­—æ®µäº¤ä»£æ¸…æ¥šã€‚é€šè¿‡ Pro ç‰ˆæœ¬çš„æ¡†æ¶ï¼Œä½ ç›¸å½“äºæŠŠæ•°æ®åº“çš„â€œåœ°å›¾â€ç›´æ¥äº¤ç»™äº† AIï¼Œå®ƒç”Ÿæˆçš„ SQL å‡ ä¹å¯ä»¥è¾¾åˆ°ç›´æ¥å¤åˆ¶ç²˜è´´åˆ° Navicat æˆ– DBeaver ä¸­å°±èƒ½æˆåŠŸè¿è¡Œçš„ç¨‹åº¦ã€‚è¿™æ¯å¤©è‡³å°‘èƒ½ä¸ºä½ çœä¸‹ä¸€ä¸ªå°æ—¶çš„â€œå†™ç +Debugâ€æ—¶é—´ï¼

---

## ğŸ™‹ å¸¸è§é—®é¢˜ (FAQ)

- **Q: å¦‚æœæˆ‘çš„æ•°æ®è¡¨åŒ…å«å…¬å¸æ•æ„Ÿä¿¡æ¯æ€ä¹ˆåŠï¼Ÿ**
  - A: **ç»å¯¹ä¸è¦**æŠŠçœŸå®çš„æ•æ„Ÿæ•°æ®ï¼ˆå¦‚ç”¨æˆ·å¯†ç ã€èº«ä»½è¯å·ã€çœŸå®çš„ä¸šåŠ¡æµæ°´ï¼‰å‘ç»™ AIã€‚ä½ åªéœ€è¦æä¾›**è¡¨åå’Œåˆ—åï¼ˆSchema ç»“æ„ï¼‰**å³å¯ã€‚ä¸ºäº†ç¡®ä¿ç»å¯¹å®‰å…¨ï¼Œä½ ç”šè‡³å¯ä»¥åœ¨å‘é€å‰æŠŠçœŸå®çš„è¡¨åæ›¿æ¢æˆ `table_A`ã€`table_B`ï¼Œæ‹¿åˆ° SQL åå†è‡ªè¡Œæ›¿æ¢å›æ¥ã€‚

- **Q: ä¸ºä»€ä¹ˆ AI æœ‰æ—¶å€™å†™çš„ SQL æŸ¥å‡ºæ¥çš„æ•°æ®ç»“æœä¸å¯¹ï¼Ÿ**
  - A: é€šå¸¸æ˜¯å› ä¸ºè‡ªç„¶è¯­è¨€çš„æè¿°å­˜åœ¨æ­§ä¹‰ã€‚ä¾‹å¦‚ä½ è¦æ±‚æŸ¥â€œä¸Šä¸ªæœˆçš„æ´»è·ƒç”¨æˆ·â€ï¼Œä½† AI ä¸çŸ¥é“ä½ å¯¹â€œæ´»è·ƒâ€çš„å†…éƒ¨å®šä¹‰åˆ°åº•æ˜¯â€œç™»å½•è¿‡â€è¿˜æ˜¯â€œä¸‹è¿‡è®¢å•â€ã€‚è¯·åŠ¡å¿…åœ¨ `[æŸ¥è¯¢éœ€æ±‚]` ä¸­ç»™å‡ºæå…¶ä¸¥è°¨çš„æ¡ä»¶å®šä¹‰ã€‚

- **Q: å…è´¹ç‰ˆçš„ AI ä¹Ÿèƒ½å†™å¥½å¤æ‚çš„ SQL å—ï¼Ÿ**
  - A: åŸºç¡€çš„å¢åˆ æ”¹æŸ¥æ²¡æœ‰é—®é¢˜ï¼Œä½†å¦‚æœæ¶‰åŠå‡ ç™¾è¡Œçš„é•¿æŸ¥è¯¢æˆ–æåº¦å¤æ‚çš„çª—å£å‡½æ•°åµŒå¥—ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨ GPT-4 æˆ– Claude 3.5 Sonnetï¼Œå®ƒä»¬åœ¨ä»£ç é€»è¾‘æ¨ç†å’Œæ•°æ®åº“æ–¹è¨€ï¼ˆDialectï¼‰å‡†ç¡®åº¦ä¸Šè¦è¿œè¶…å…è´¹æ¨¡å‹ã€‚

---

## ğŸ§¬ æç¤ºè¯è§£å‰– (Why it works?)

1.  **è§’è‰²è®¾å®š (Role)ï¼š** èµ‹äºˆâ€œæ‹¥æœ‰10å¹´ç»éªŒçš„é«˜çº§ DBAâ€è§’è‰²ï¼Œå¼ºåˆ¶è®© AI åˆ‡æ¢åˆ°ä¸“å®¶æ¨¡å¼ï¼Œè¾“å‡ºçš„ä»£ç ä¼šæ›´åŠ ä¸¥è°¨ï¼Œå¹¶ä¸”è‡ªåŠ¨è€ƒè™‘åˆ°æŸ¥è¯¢æ€§èƒ½å’Œç¼©è¿›è§„èŒƒã€‚
2.  **ä¸Šä¸‹æ–‡æ³¨å…¥ (Schema Context)ï¼š** é€šè¿‡æ˜ç¡®è¦æ±‚è¾“å…¥è¡¨ç»“æ„ï¼Œä»æ ¹æºä¸Šæ¶ˆé™¤äº† AI ççŒœå­—æ®µåçš„é€šç—…ï¼Œä¿è¯äº†ä»£ç çš„å¯æ‰§è¡Œæ€§ã€‚
3.  **çº¦æŸä¸é˜²å¾¡æœºåˆ¶ (Warning)ï¼š** â€œä¸è¦çç¼–å­—æ®µï¼Œç¼ºå¤±ç«‹åˆ»æŒ‡å‡ºâ€è¿™ä¸€é˜²å¾¡æ€§æŒ‡ä»¤ï¼Œæœ‰æ•ˆåœ°é˜»æ­¢äº† AI ä¸ºäº†è¿åˆäººç±»è€Œâ€œå¼ºè¡Œå†™é”™ä»£ç â€çš„æ¶ä¹ ã€‚

---

## ğŸ“Š æ•ˆæœå¯¹æ¯”ï¼šBefore & After

### âŒ Before (ç¹ççš„æ‰‹å·¥å°è¯•ä¸æŠ¥é”™)

```sql
(è¯•å›¾è‡ªå·±å†™çª—å£å‡½æ•°ï¼Œç»“æœè¯­æ³•æŠ¥é”™ï¼Œä¸”é€»è¾‘ä¸æ¸…æ™°)
SELECT e.name, s.amount
FROM employees e
JOIN sales s ON e.id = s.employee_id
WHERE s.sale_date > '2026-01-01'
-- å¿˜äº†æ€ä¹ˆå†™æ¯ä¸ªéƒ¨é—¨çš„ Top 3 æ’è¡Œ... ç¿»çœ‹æ–‡æ¡£ä¸­...
```

### âœ… After (ä½¿ç”¨ Pro Prompt åçš„ AI è¾“å‡º)

```sql
-- ä½¿ç”¨ CTE (å…¬ç”¨è¡¨è¡¨è¾¾å¼) è®¡ç®—æ¯ä¸ªå‘˜å·¥çš„é”€å”®æ€»é¢ï¼Œæå‡ä»£ç å¯è¯»æ€§
WITH EmployeeSales AS (
    SELECT
        e.department_id,
        e.name,
        SUM(s.amount) AS total_sales
    FROM employees e
    JOIN sales s ON e.id = s.employee_id
    WHERE s.sale_date >= '2026-01-01' AND s.sale_date < '2026-04-01'
    GROUP BY e.department_id, e.name
),
-- ä½¿ç”¨çª—å£å‡½æ•° ROW_NUMBER ä¸ºæ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥æŒ‰é”€å”®æ€»é¢è¿›è¡Œé™åºæ’å
RankedSales AS (
    SELECT
        department_id,
        name,
        total_sales,
        ROW_NUMBER() OVER(PARTITION BY department_id ORDER BY total_sales DESC) as sales_rank
    FROM EmployeeSales
)
-- æœ€ç»ˆç­›é€‰å‡ºæ¯ä¸ªéƒ¨é—¨æ’åå‰ 3 çš„å‘˜å·¥
SELECT
    department_id,
    name,
    total_sales
FROM RankedSales
WHERE sales_rank <= 3;
```

---

## ğŸ¯ æ€»ç»“

ç”¨è‡ªç„¶è¯­è¨€å†™ SQL å·²ç»æˆä¸ºç°ä»£èŒåœºäººå’Œæ•°æ®å·¥ä½œè€…çš„å¿…å¤‡ææ•ˆæŠ€èƒ½ã€‚æŒæ¡è¿™å¥—ç»“æ„åŒ–çš„æç¤ºè¯ï¼Œä½ å°±èƒ½ä»ç¹æ‚çš„è¯­æ³•çº é”™ä¸­å½»åº•è§£è„±å‡ºæ¥ï¼ŒæŠŠå®è´µçš„ç²¾åŠ›é›†ä¸­åœ¨çœŸæ­£èƒ½äº§ç”Ÿä¸šåŠ¡ä»·å€¼çš„â€œæ•°æ®åˆ†æå’Œå†³ç­–â€ä¸Šã€‚

ç°åœ¨ï¼ŒæŠŠä½ çš„ Schema ä¸¢ç»™ AIï¼Œç«‹åˆ»å»æ‹‰å–ä½ æƒ³è¦çš„æ•°æ®å§ï¼ ğŸ·
